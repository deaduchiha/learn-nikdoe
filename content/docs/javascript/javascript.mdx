---
title: "شاخه اصول جاوااسکریپت"
description: "راهنمای جامع و گام‌به‌گام شامل نحو ES2024، انواع داده، کلوزرها، DOM، رویدادها، fetch، async/await، JSON و پروژه‌های عملی کوچک."
date: "2025-06-04"
sidebar_position: 3
keywords:
  - javascript
  - ES2024
  - fundamentals
  - DOM
  - fetch
  - async/await
  - projects
---

## 🚀 مقدمه

به سفر شما در دنیای جاوااسکریپت مدرن خوش آمدید! این راهنمای جامع شما را از مبتدی مطلق تا توسعه‌دهنده مطمئن جاوااسکریپت با استفاده از جدیدترین ویژگی‌های ES2024 هدایت می‌کند.

### آنچه یاد خواهید گرفت

- **اصول اصلی**: متغیرها، انواع داده، توابع و کنترل جریان
- **جاوااسکریپت مدرن**: نحو ES2024، ماژول‌ها، async/await و ویژگی‌های پیشرفته
- **دستکاری DOM**: ایجاد صفحات وب تعاملی
- **مهارت‌های دنیای واقعی**: Fetch API، مدیریت JSON، مدیریت خطا
- **پروژه‌های عملی**: ساخت اپلیکیشن‌های سنگ-کاغذ-قیچی و داشبورد آب و هوا

### این راهنما چگونه کار می‌کند

هر بخش شامل:

- ✅ **توضیحات واضح** با مثال‌های دنیای واقعی
- 🎯 **بهترین شیوه‌ها** و نکات حرفه‌ای
- 💻 **مثال‌های کد تعاملی** که می‌توانید فوراً اجرا کنید
- 📝 **تمرینات تکلیف** برای تقویت یادگیری
- 🚀 **پروژه‌های کوچک** برای اعمال مهارت‌هایتان

### پیش‌نیازها

- سواد کامپیوتری پایه
- یک مرورگر وب مدرن (Chrome، Firefox، Safari، Edge)
- کنجکاوی و تمایل به تمرین!

---

## 📋 بخش ۱: راه‌اندازی محیط توسعه شما

### ۱.۱ چرا راه‌اندازی مناسب مهم است

قبل از نوشتن هر جاوااسکریپتی، به یک محیط توسعه محکم نیاز دارید. آن را مثل راه‌اندازی یک کارگاه در نظر بگیرید - به ابزارهای مناسب برای ساخت مؤثر نیاز دارید.

**آنچه نیاز خواهید داشت:**

۱. **مرورگر مدرن** - Chrome، Firefox، Edge یا Safari
۲. **ویرایشگر کد** - VS Code (توصیه شده) یا ویرایشگر ترجیحی شما
۳. **Node.js** - برای اجرای جاوااسکریپت خارج از مرورگر
۴. **ابزارهای توسعه‌دهنده** - ESLint و Prettier برای کیفیت کد

### ۱.۲ نصب Node.js

Node.js به شما اجازه می‌دهد جاوااسکریپت را روی کامپیوترتان اجرا کنید و ابزارهای مفید نصب کنید.

**مرحله ۱: دانلود Node.js**

۱. به [nodejs.org](https://nodejs.org/) بروید
۲. نسخه **LTS** (پشتیبانی طولانی مدت) را دانلود کنید
۳. نصب‌کننده را اجرا کنید و دستورالعمل‌ها را دنبال کنید

**مرحله ۲: تأیید نصب**
ترمینال/خط فرمان خود را باز کنید و اجرا کنید:

```bash
node --version
npm --version
```

باید شماره‌های نسخه مثل `v18.17.0` و `9.6.7` را ببینید.

### ۱.۳ راه‌اندازی VS Code

VS Code یک ویرایشگر کد قدرتمند و رایگان با پشتیبانی عالی از جاوااسکریپت است.

**مرحله ۱: نصب VS Code**

۱. از [code.visualstudio.com](https://code.visualstudio.com/) دانلود کنید
۲. نصب کنید و VS Code را راه‌اندازی کنید

**مرحله ۲: نصب افزونه‌های ضروری**
در VS Code، به Extensions (Ctrl+Shift+X) بروید و نصب کنید:

- **ESLint** توسط Microsoft - مشکلات کد را پیدا و تعمیر می‌کند
- **Prettier - Code formatter** توسط Prettier - کد شما را خودکار فرمت می‌کند
- **JavaScript (ES6) code snippets** توسط charalampos karypidis - میانبرهای مفید کد
- **Live Server** توسط Ritwick Dey - صفحات HTML شما را خودکار بارگذاری مجدد می‌کند

**مرحله ۳: پیکربندی فرمت خودکار**

۱. تنظیمات VS Code را باز کنید (Ctrl+,)
۲. برای "format on save" جستجو کنید
۳. گزینه را برای فعال‌سازی آن تیک بزنید
۴. Prettier را به عنوان فرمتر پیش‌فرض تنظیم کنید

### ۱.۴ ایجاد اولین پروژه شما

**مرحله ۱: ایجاد پوشه پروژه**

```bash
mkdir my-javascript-learning
cd my-javascript-learning
```

**مرحله ۲: راه‌اندازی پروژه Node.js**

```bash
npm init -y
```

**مرحله ۳: نصب ابزارهای توسعه**

```bash
npm install eslint prettier --save-dev
npx eslint --init
```

وقتی پرسیده شد، انتخاب کنید:

- "To check syntax, find problems, and enforce code style"
- "JavaScript modules (import/export)"
- "Browser environment"
- "Use ESLint recommended rules"
- "JSON config format"

**مرحله ۴: پیکربندی Prettier**
فایل `.prettierrc` ایجاد کنید:

```json
{
  "singleQuote": true,
  "semi": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 80
}
```

**مرحله ۵: اضافه کردن اسکریپت‌ها به package.json**

```json
{
  "scripts": {
    "lint": "eslint .",
    "format": "prettier --write .",
    "dev": "live-server"
  }
}
```

### ۱.۵ اولین فایل جاوااسکریپت شما

`index.html` ایجاد کنید:

```html
<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>یادگیری جاوااسکریپت</title>
  </head>
  <body>
    <h1>به جاوااسکریپت خوش آمدید!</h1>
    <div id="output"></div>

    <script src="./index.js" type="module"></script>
  </body>
</html>
```

`index.js` ایجاد کنید:

```javascript
console.log("سلام، جاوااسکریپت!");
document.getElementById("output").textContent = "جاوااسکریپت کار می‌کند!";
```

**تست راه‌اندازی شما:**

۱. روی `index.html` در VS Code راست کلیک کنید
۲. "Open with Live Server" را انتخاب کنید
۳. DevTools مرورگر را باز کنید (F12)
۴. کنسول را برای پیام خود بررسی کنید!

---

### 🎯 تکلیف برای بخش ۱

**تمرین ۱: تأیید محیط**

۱. یک پوشه جدید به نام `javascript-practice` ایجاد کنید
۲. ESLint و Prettier را طبق مراحل بالا راه‌اندازی کنید
۳. فایلی به نام `test.js` با این کد ایجاد کنید:

```javascript
const greeting = "سلام دنیا";
console.log(greeting);
```

۴. `npm run lint` را اجرا کنید - باید خطای نقطه‌ویرگول را ببینید
۵. `npm run format` را اجرا کنید - این باید فرمت را تعمیر کند
۶. `npm run lint` را دوباره اجرا کنید - حالا باید موفق باشد!

**تمرین ۲: اولین صفحه تعاملی**

۱. فایل‌های `index.html` و `script.js` ایجاد کنید
۲. یک دکمه به HTML خود اضافه کنید
۳. جاوااسکریپتی بنویسید که متن دکمه را هنگام کلیک تغییر دهد
۴. با Live Server تست کنید

**تمرین ۳: تمرین DevTools مرورگر**

۱. صفحه خود را در Chrome باز کنید
۲. DevTools را باز کنید (F12)
۳. سعی کنید `console.log('تست DevTools')` را در تب Console تایپ کنید
۴. با سایر روش‌های کنسول مثل `console.warn()` و `console.error()` آزمایش کنید

---

## �� بخش ۲: اساسی‌های جاوااسکریپت - متغیرها، انواع داده و نحو

### ۲.۱ درک متغیرها

متغیرها مثل جعبه‌های نام‌دار هستند که اطلاعات را ذخیره می‌کنند. در جاوااسکریپت، سه روش برای ایجاد متغیرها وجود دارد:

```javascript
// روش مدرن - محدود به محدوده متغیر، می‌تواند مجدداً تنظیم شود
let name = "Alice";
name = "Bob"; // ✅ این کار برقرار است

// روش مدرن - محدود به محدوده متغیر، نمی‌تواند مجدداً تنظیم شود
const age = 25;
// age = 26; // ❌ این باعث خطا می‌شود

// روش قدیم - محدود به محدوده تابع (در مدرن کد استفاده نمی‌شود)
var oldStyle = "not recommended";
```

**بهترین روش‌ها:**

- از `const` به طور پیش‌فرض استفاده کنید
- از `let` را در صورت نیاز برای مجدد تنظیم استفاده کنید
- در مدرن کد از `var` استفاده نکنید

### ۲.۲ انواع داده در جاوااسکریپت

جاوااسکریپت ۷ نوع اصلی و یک نوع مرجع دارد:

#### نوع اصلی

```javascript
// ۱. Number - اعداد صحیح و اعشاری
const integer = 42;
const decimal = 3.14;
const negative = -10;

// ۲. String - داده متنی
const singleQuotes = "Hello";
const doubleQuotes = "World";
const templateLiteral = `Hello ${name}!`; // روش مدرن

// ۳. Boolean - true یا false
const isActive = true;
const isLoggedIn = false;

// ۴. Null - "مقدار ندارد" به صورت صریح
const emptyValue = null;

// ۵. Undefined - متغیر اعلام شده اما مقدار تخصیص داده نشده است
let notDefined;
console.log(notDefined); // undefined

// ۶. Symbol - شناسه منحصر به فرد
const uniqueId = Symbol("id");

// ۷. BigInt - برای اعداد بسیار بزرگ
const bigNumber = 9007199254740991n;
```

#### نوع مرجع

```javascript
// Object - می‌تواند مقادیر چندگانه را ذخیره کند
const user = {
  name: "Alice",
  age: 30,
  isActive: true,
};

// Arrays هم هستند
const colors = ["red", "green", "blue"];

// توابع هم هستند
function greet() {
  return "Hello!";
}
```

### ۲.۳ بررسی نوع و تبدیل نوع

#### بررسی نوع

```javascript
console.log(typeof 42); // "number"
console.log(typeof "hello"); // "string"
console.log(typeof true); // "boolean"
console.log(typeof null); // "object" (خطای جاوا!)
console.log(typeof undefined); // "undefined"
console.log(typeof {}); // "object"
console.log(typeof []); // "object"
console.log(typeof function () {}); // "function"
```

#### تبدیل نوع

```javascript
// String به Number
const numString = "123";
const number = Number(numString); // 123
const parsed = parseInt("123.45"); // 123
const floated = parseFloat("123.45"); // 123.45

// Number به String
const num = 42;
const str = String(num); // "42"
const str2 = num.toString(); // "42"

// تبدیل Boolean
const truthy = Boolean(1); // true
const falsy = Boolean(0); // false
const empty = Boolean(""); // false
```

### ۲.۴ لیترال‌های قالب (مدرن ترین ترکیب متن)

لیترال‌های قالب از علامت های قراردادی (`) و اجازه می‌دهند تا عبارات داخلی را در بر بگیرند:

```javascript
const name = "Alice";
const age = 30;
const city = "Berlin";

// روش قدیم (ترکیب)
const oldGreeting = "Hello, " + name + "! You are " + age + " years old.";

// روش مدرن (لیترال‌های قالب)
const modernGreeting = `Hello, ${name}! You are ${age} years old.`;

// رشته‌های چند خطی
const multiLine = `
    Name: ${name}
    Age: ${age}
    City: ${city}
`;

// عبارات داخل لیترال‌های قالب
const price = 19.99;
const quantity = 3;
const total = `Total: $${(price * quantity).toFixed(2)}`;
console.log(total); // "Total: $59.97"
```

### ۲.۵ توضیحات و مستندسازی کد

```javascript
// توضیحات تک خطی
const name = "Alice"; // این هم یک توضیح است

/*
  توضیحات چند خطی
  این را برای توضیحات بلندتر استفاده کنید
*/

/**
 * توضیحات تابع
 * @param {string} name - نام کاربر
 * @param {number} age - سن کاربر
 * @returns {string} پیام خوش آمدگویی
 */
function createGreeting(name, age) {
  return `Hello, ${name}! You are ${age} years old.`;
}
```

**بهترین روش:** کد خودکارسازنده را با نام متغیرهای واضح تر از استفاده از توضیحات انجام دهید.

---

### �� تکلیف برای بخش ۲

**تمرین ۱: تعریف متغیر**

```javascript
// متغیرهای مختلفی برای هر نوع داده ایجاد کنید:
// - نام شما (رشته)
// - سن شما (عدد)
// - آیا شما دانشجو هستید (بولین)
// - رنگ‌های مورد علاقه شما (آرایه)
// - اطلاعات ارتباطی شما (شیء با نام، ایمیل، تلفن)
// همه متغیرها و نوع آنها را چاپ کنید
```

**تمرین ۲: تحمیل تبدیل نوع**

```javascript
// تابعی بنویسید که:
// ۱. یک رشته مانند "123.45"
// ۲. آن را به عدد تبدیل کند
// ۳. آن را در ۲ ضرب کند
// ۴. نتیجه را به عنوان رشته با ۲ رقم اعشار برگرداند
// با: "10.5", "abc", "0" آزمایش کنید
```

**تمرین ۳: توضیحات قالبی**

```javascript
// یک سوره با استفاده از لیترال‌های قالب با:
// - حداقل ۳ متغیر
// - یک عبارت ریاضی
// - قالب بندی چند خطی
// مثال: "Once upon a time, [name] was [age] years old..."
```

**تمرین ۴: تست داده‌نگار**

```javascript
// تابعی بنویسید که هر مقداری را می‌گیرد و به:
// - "number" برای اعداد
// - "string" برای رشته‌ها
// - "boolean" برای بولین
// - "object" برای شیء ها و آرایه‌ها
// - "null" برای null
// - "undefined" برای undefined
// با ورودی های مختلف آزمایش کنید
```

---

## 🔄 بخش ۳: کنترل جریان - اتخاذ تصمیمات و تکرار کد

### ۳.۱ عبارات شرطی (if/else)

عبارات شرطی به شما اجازه می‌دهد کد بر اساس شرایط اتخاذ کند.

#### عبارات شرطی اصلی

```javascript
const score = 85;

if (score >= 90) {
  console.log("Grade: A");
} else if (score >= 80) {
  console.log("Grade: B");
} else if (score >= 70) {
  console.log("Grade: C");
} else {
  console.log("Grade: F");
}
```

#### عملگرهای مقایسه

```javascript
// برابری
console.log(5 === 5); // true (برابری صریح)
console.log(5 == "5"); // true (برابری ضعیف - به استفاده نمی‌شود!)
console.log(5 !== 6); // true (نابرابری صریح)

// رابطه‌ای
console.log(10 > 5); // true
console.log(10 >= 10); // true
console.log(5 < 10); // true
console.log(5 <= 5); // true

// منطقی
const isLoggedIn = true;
const hasPermission = false;
console.log(isLoggedIn && hasPermission); // false (AND)
console.log(isLoggedIn || hasPermission); // true (OR)
console.log(!isLoggedIn); // false (NOT)
```

#### مثال واقعی

```javascript
function checkWeather(temperature, isRaining) {
  if (temperature > 30) {
    return "It's hot! Stay hydrated.";
  } else if (temperature > 20) {
    return "Nice weather!";
  } else if (temperature > 10) {
    return "It's cool.";
  } else {
    return "It's cold!";
  }

  if (isRaining) {
    return "Don't forget your umbrella!";
  }
}

console.log(checkWeather(25, false)); // "Nice weather!"
```

### ۳.۲ عملگر سه‌تایی (ترنری)

```javascript
// عبارات شرطی عادی
const age = 20;
let status;
if (age >= 18) {
  status = "adult";
} else {
  status = "minor";
}

// عملگر سه‌تایی (ترنری)
const status2 = age >= 18 ? "adult" : "minor";

// عملگر سه‌تایی تو درونی (به صورت کم استفاده)
const message = age >= 18 ? (age >= 65 ? "senior" : "adult") : "minor";

// مثال واقعی
const price = 25;
const discount = price > 20 ? price * 0.1 : 0;
const finalPrice = price - discount;
```

### ۳.۳ عبارات جاوااسکریپت

```javascript
// عبارات شرطی عادی
const age = 20;
let status;
if (age >= 18) {
  status = "adult";
} else {
  status = "minor";
}

// عملگر سه‌تایی (ترنری)
const status2 = age >= 18 ? "adult" : "minor";

// عملگر سه‌تایی تو درونی (به صورت کم استفاده)
const message = age >= 18 ? (age >= 65 ? "senior" : "adult") : "minor";

// مثال واقعی
const price = 25;
const discount = price > 20 ? price * 0.1 : 0;
const finalPrice = price - discount;
```

### ۳.۴ عبارات جاوااسکریپت

```javascript
// عبارات شرطی عادی
const age = 20;
let status;
if (age >= 18) {
  status = "adult";
} else {
  status = "minor";
}

// عملگر سه‌تایی (ترنری)
const status2 = age >= 18 ? "adult" : "minor";

// عملگر سه‌تایی تو درونی (به صورت کم استفاده)
const message = age >= 18 ? (age >= 65 ? "senior" : "adult") : "minor";

// مثال واقعی
const price = 25;
const discount = price > 20 ? price * 0.1 : 0;
const finalPrice = price - discount;
```

### ۳.۵ عبارات جاوااسکریپت

```javascript
// عبارات شرطی عادی
const age = 20;
let status;
if (age >= 18) {
  status = "adult";
} else {
  status = "minor";
}

// عملگر سه‌تایی (ترنری)
const status2 = age >= 18 ? "adult" : "minor";

// عملگر سه‌تایی تو درونی (به صورت کم استفاده)
const message = age >= 18 ? (age >= 65 ? "senior" : "adult") : "minor";

// مثال واقعی
const price = 25;
const discount = price > 20 ? price * 0.1 : 0;
const finalPrice = price - discount;
```

### ۳.۶ عبارات جاوااسکریپت

```javascript
// عبارات شرطی عادی
const age = 20;
let status;
if (age >= 18) {
  status = "adult";
} else {
  status = "minor";
}

// عملگر سه‌تایی (ترنری)
const status2 = age >= 18 ? "adult" : "minor";

// عملگر سه‌تایی تو درونی (به صورت کم استفاده)
const message = age >= 18 ? (age >= 65 ? "senior" : "adult") : "minor";

// مثال واقعی
const price = 25;
const discount = price > 20 ? price * 0.1 : 0;
const finalPrice = price - discount;
```

---

### 🎯 تکلیف برای بخش ۳

**تمرین ۱: محاسبه‌گر نمره**

```javascript
// تابعی بنویسید که getGrade(score) را می‌گیرد که:
// - "A" برای امتیازات 90-100
// - "B" برای امتیازات 80-89
// - "C" برای امتیازات 70-79
// - "D" برای امتیازات 60-69
// - "F" برای امتیازات کمتر از 60
// با امتیازات مختلف آزمایش کنید
```

**تمرین ۲: استفاده از عبارات جاوااسکریپت**

```javascript
// تابعی بنویسید که getDayInfo(day) را با استفاده از عبارات جاوااسکریپت ایجاد کند که:
// - "Start of week" برای یکشنبه
// - "Midweek" برای دوشنبه، سه شنبه، چهارشنبه
// - "Almost weekend" برای پنجشنبه
// - "Weekend" برای شنبه، یکشنبه
// - "Invalid day" برای هر چیز دیگر
```

**تمرین ۳: پردازش آرایه**

```javascript
// با این آرایه: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
// ۱. از forEach برای چاپ هر عدد استفاده کنید
// ۲. از map برای ایجاد آرایه ای از مربعات استفاده کنید
// ۳. از filter برای به دست آوردن فقط اعداد زوج استفاده کنید
// ۴. از reduce برای جمع آوری استفاده کنید
// ۵. از reduce برای پیدا کردن مقدار بیشینه استفاده کنید
```

**تمرین ۴: اعتبارسنج عبارت**

```javascript
// تابعی بنویسید که validatePassword(password) را می‌گیرد که:
// - "Strong" اگر رمز عبور ۸+ کاراکتر باشد و شامل عدد باشد
// - "Medium" اگر رمز عبور ۶+ کاراکتر باشد
// - "Weak" اگر رمز عبور کمتر از ۶ کاراکتر باشد
// با: "abc123", "password", "123", "strongpass123" آزمایش کنید
```

**تمرین ۵: ماشین حساب سبد خرید**

```javascript
// با استفاده از آرایه ای از اقلام با قیمت:
const items = [
  { name: "Apple", price: 0.5 },
  { name: "Banana", price: 0.3 },
  { name: "Orange", price: 0.75 },
];
// محاسبه قیمت کل
// اگر کل بیشتر از $2 باشد، ۱۰% تخفیف اعمال کنید
// نهایی قیمت را برگردانید
```

---

## 🔧 بخش ۴: توابع، محدوده و کلوزرها

توابع بلوک‌های اصلی برنامه‌های جاوااسکریپت هستند. آنها به شما اجازه می‌دهند کد را به بلوک‌های قابل استفاده مجدد تبدیل کنید و توابع قدرتمندی ایجاد کنند.

### ۴.۱ توابع تعریف شده و تعبیر شده

#### توابع تعریف شده (ترادیشنال)

```javascript
function add(a, b) {
  return a + b;
}
console.log(add(2, 3)); // 5
```

**ویژگی‌ها:**

- **هویست**: قبل از اعلان قابل فراخوانی است
- **نام‌دار**: خوب برای اسکریپت های خطا و پیگیری پشته است
- **نحو عادی**: سینتکس معمولی برای بینندگان

#### توابع تعبیر شده (مدرن)

```javascript
const multiply = function (a, b) {
  return a * b;
};
console.log(multiply(2, 3)); // 6
```

**ویژگی‌ها:**

- **نه هویست**: باید قبل از استفاده اعلان شود
- **می‌تواند بیانی**: در مورد اسکریپت های خطا برای استفاده سخت‌تر است
- **متراکم**: می‌تواند به متغیرها اختصاص داده شود

#### توابع آرا (ES6+)

```javascript
// توابع یک پارامتر، یک عبارت
const square = (x) => x * x;

// چند پارامتر
const add = (a, b) => a + b;

// بیش از یک عبارت به جریان نیاز دارد
const greet = (name) => {
  const message = `Hello, ${name}!`;
  return message;
};

// بدون پارامتر
const getRandom = () => Math.random();
```

**ویژگی‌ها:**

- **سینتکس ساده**: برای توابع کوتاه خوب است
- **ندارد از `this` خود استفاده می‌کند**: از محدوده اطراف ارث می‌برد
- **ندارد از آبجکت `arguments` استفاده می‌کند**: از پارامترهای باقیمانده استفاده کنید
- **بازگشت ضمنی**: اگر عبارت یکی باشد، به طور خودکار بازگشت می‌شود

### ۴.۲ وقتی برای هر نوع استفاده شود

```javascript
// تابع تعریف - برای توابع نام‌دار، قابل استفاده مجدد
function calculateArea(width, height) {
  return width * height;
}

// توابع تعبیر شده - وقتی نیاز به سفارش هست
const operations = {
  add: function (a, b) {
    return a + b;
  },
  subtract: function (a, b) {
    return a - b;
  },
};

// توابع آرا - برای کال‌ها و توابع کوتاه
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map((n) => n * 2);
const evens = numbers.filter((n) => n % 2 === 0);
```

### ۴.۳ پارامترها، مقادیر پیش‌فرض و باقیمانده

#### مقادیر پیش‌فرض

```javascript
function greet(name = "Guest", greeting = "Hello") {
  return `${greeting}, ${name}!`;
}

console.log(greet()); // "Hello, Guest!"
console.log(greet("Alice")); // "Hello, Alice!"
console.log(greet("Bob", "Hi")); // "Hi, Bob!"
```

#### پارامترهای باقیمانده

```javascript
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3, 4, 5)); // 15
console.log(sum(10, 20)); // 30
console.log(sum()); // 0
```

#### استفاده از جداسازی پارامترها

```javascript
function processUser({ name, age, email = "unknown" }) {
  return `${name} (${age}) - ${email}`;
}

const user = { name: "Alice", age: 30 };
console.log(processUser(user)); // "Alice (30) - unknown"
```

### ۴.۴ محدوده: درک نمایش متغیرها

#### محدوده عمومی

```javascript
const globalVar = "I'm accessible everywhere";

function someFunction() {
  console.log(globalVar); // ✅ می‌تواند متغیرهای عمومی را دسترسی داشته باشد
}

someFunction();
```

#### محدوده محلی

```javascript
function example() {
  const localVar = "I'm only accessible inside this function";
  console.log(localVar); // ✅ کار می‌کند
}

// console.log(localVar); // ❌ خطا - در خارج از این تابع دسترسی ندارد
```

#### محدوده بلوک (let/const)

```javascript
if (true) {
  const blockVar = "I'm only accessible in this block";
  let anotherVar = "Me too!";
  console.log(blockVar); // ✅ کار می‌کند
}

// console.log(blockVar); // ❌ خطا - در خارج از این بلوک دسترسی ندارد
```

#### محدوده تابع (var - در مدرن کد استفاده نمی‌شود)

```javascript
function oldStyle() {
  var functionScoped = "I'm accessible throughout this function";
  if (true) {
    var stillAccessible = "I'm also accessible throughout the function";
  }
  console.log(stillAccessible); // ✅ کار می‌کند (به عنوان let/const نیست)
}
```

### ۴.۵ کلوزرها: توابع با حافظه

یک **کلوزر** تابعی است که متغیرهای از محدوده خارج آن هنگامی که تابع خارج شده است، "به یاد داشته است".

#### مثال ابتدایی کلوزر

```javascript
function createCounter() {
  let count = 0; // این متغیر "در حافظه ذخیره شده است"

  return function () {
    count++;
    return count;
  };
}

const counter1 = createCounter();
const counter2 = createCounter();

console.log(counter1()); // 1
console.log(counter1()); // 2
console.log(counter2()); // 1 (تعداد جداگانه)
console.log(counter1()); // 3
```

#### مثال واقعی کلوزر

**حفظ اطلاعات:**

```javascript
function createBankAccount(initialBalance) {
  let balance = initialBalance; // متغیر خصوصی

  return {
    getBalance: () => balance,
    deposit: (amount) => {
      if (amount > 0) {
        balance += amount;
        return `Deposited $${amount}. New balance: $${balance}`;
      }
      return "Invalid amount";
    },
    withdraw: (amount) => {
      if (amount > 0 && amount <= balance) {
        balance -= amount;
        return `Withdrew $${amount}. New balance: $${balance}`;
      }
      return "Insufficient funds or invalid amount";
    },
  };
}

const account = createBankAccount(100);
console.log(account.getBalance()); // 100
console.log(account.deposit(50)); // "Deposited $50. New balance: $150"
console.log(account.withdraw(30)); // "Withdrew $30. New balance: $120"
// console.log(balance); // ❌ خطا - موجودی خصوصی است
```

**تولید کننده توابع:**

```javascript
function createGreeter(greeting) {
  return function (name) {
    return `${greeting}, ${name}!`;
  };
}

const sayHello = createGreeter("Hello");
const sayHi = createGreeter("Hi");
const sayGoodbye = createGreeter("Goodbye");

console.log(sayHello("Alice")); // "Hello, Alice!"
console.log(sayHi("Bob")); // "Hi, Bob!"
console.log(sayGoodbye("Charlie")); // "Goodbye, Charlie!"
```

**مدیریت رویدادها با وضعیت:**

```javascript
function createButtonHandler(buttonId) {
  let clickCount = 0;

  return function () {
    clickCount++;
    console.log(`Button ${buttonId} clicked ${clickCount} times`);
  };
}

// در یک برنامه واقعی، شما از این به این شکل استفاده می‌کنید:
// document.getElementById('btn1').addEventListener('click', createButtonHandler('btn1'));
```

### ۴.۶ پترن‌های مشترک در کلوزرها

#### مدل‌سازی

```javascript
const calculator = (function () {
  // متغیرهای خصوصی
  let history = [];

  // تابع خصوصی
  function addToHistory(operation, result) {
    history.push({ operation, result, timestamp: new Date() });
  }

  // سطح عمومی
  return {
    add: (a, b) => {
      const result = a + b;
      addToHistory(`${a} + ${b}`, result);
      return result;
    },
    subtract: (a, b) => {
      const result = a - b;
      addToHistory(`${a} - ${b}`, result);
      return result;
    },
    getHistory: () => [...history], // Return copy
    clearHistory: () => {
      history = [];
    },
  };
})();

console.log(calculator.add(5, 3)); // 8
console.log(calculator.subtract(10, 4)); // 6
console.log(calculator.getHistory()); // Array of operations
```

#### استفاده از کمینه سازی

```javascript
function multiply(a, b) {
  return a * b;
}

function createMultiplier(factor) {
  return function (number) {
    return multiply(factor, number);
  };
}

const double = createMultiplier(2);
const triple = createMultiplier(3);

console.log(double(5)); // 10
console.log(triple(5)); // 15
```

---

### 🎯 تکلیف برای بخش ۴

**تمرین ۱: تولید کننده تابع**

```javascript
// تابعی بنویسید که createMultiplier(x) را می‌گیرد که یک تابع جدید برمی‌گرداند
// که یک پارامتر y را می‌گیرد و x * y را برمی‌گرداند
// با استفاده از آن، تولید کنید:
// const double = createMultiplier(2)
// const triple = createMultiplier(3)
// console.log(double(5))  // Should output 10
// console.log(triple(5))  // Should output 15
```

**تمرین ۲: شمارنده کلوزر**

```javascript
// تابعی بنویسید که createCounter() را می‌گیرد که یک شیء با:
// - increment() method که عدد را به ۱ افزایش می‌دهد
// - decrement() method که عدد را به ۱ کاهش می‌دهد
// - getCount() method که عدد فعلی را برمی‌گرداند
// - reset() method که عدد را به ۰ برمی‌گرداند
// هر بار که createCounter() فراخوانی می‌شود، یک شمارنده جداگانه ایجاد می‌شود
```

**تمرین ۳: مدیر کاربر**

```javascript
// تابعی بنویسید که createUserManager() را می‌گیرد که:
// - یک آرایه داخلی کاربران (خالی ابتدا) را نگه می‌دارد
// - یک شیء با روش‌های:
//   - addUser(name, email) - کاربر را به آرایه اضافه می‌کند
//   - removeUser(email) - کاربر با ایمیل حذف می‌شود
//   - listUsers() - آرایه همه کاربران را برمی‌گرداند
//   - findUser(email) - شیء کاربر یا null را برمی‌گرداند
// نشان می‌دهد که همه روش‌ها از یک آرایه کاربران مشترک استفاده می‌کنند
```

**تمرین ۴: تبدیل کننده دما**

```javascript
// تابعی بنویسید که createConverter() را می‌گیرد که:
// - یک واحد پایه ('سلزیوس' یا 'فارنهایت') را می‌گیرد
// - یک شیء با روش‌های:
//   - toCelsius(temp) - به سلزیوس تبدیل می‌کند
//   - toFahrenheit(temp) - به فارنهایت تبدیل می‌کند
//   - getBaseUnit() - واحد پایه را برمی‌گرداند
// از کلوزرها برای حفظ واحد پایه استفاده کنید
```

**تمرین ۵: توضیح کلوزرها**

```javascript
// در خودتان، توضیح دهید:
// ۱. کلوزر چیست؟
// ۲. از کلوزرها چه کاربردی است؟
// ۳. یک مثال واقعی از زمانی که باید از کلوزر استفاده کنید
// ۲-۳ جمله برای هر پاسخ بنویسید
```

---

## 📦 بخش ۵: آرایه‌ها و شیء‌ها - ساختارهای داده و روش‌ها

### ۵.۱ آرایه‌ها: جمع‌آوری مرتب

آرایه‌ها جمع‌آوری هستند که از مرتب‌سازی لیستی از مقادیر هستند. آنها یکی از ساختارهای داده بنیادی در جاوااسکریپت هستند.

#### ایجاد و دسترسی به آرایه‌ها

```javascript
// ایجاد آرایه‌ها
const fruits = ["apple", "banana", "cherry"];
const numbers = [1, 2, 3, 4, 5];
const mixed = [1, "hello", true, { name: "Alice" }];

// دسترسی به عناصر (صفر ایندکس)
console.log(fruits[0]); // "apple"
console.log(fruits[1]); // "banana"
console.log(fruits.length); // 3

// اصلاح آرایه‌ها
fruits[1] = "blueberry"; // تغییر عنصر
fruits.push("orange"); // به انتها اضافه کردن
fruits.pop(); // از انتها حذف کردن
fruits.unshift("grape"); // به ابتدا اضافه کردن
fruits.shift(); // از ابتدا حذف کردن
```

#### روش‌های اساسی آرایه

**اضافه کردن/حذف کردن عناصر**

```javascript
const colors = ["red", "green"];

// به انتها اضافه کردن
colors.push("blue"); // ["red", "green", "blue"]

// از انتها حذف کردن
colors.pop(); // ["red", "green"]

// به ابتدا اضافه کردن
colors.unshift("yellow"); // ["yellow", "red", "green"]

// از ابتدا حذف کردن
colors.shift(); // ["red", "green"]

// درج/حذف در موقعیت خاص
colors.splice(1, 0, "purple"); // ["red", "purple", "green"]
colors.splice(1, 1); // ["red", "green"]
```

**پیدا کردن عناصر**

```javascript
const numbers = [1, 2, 3, 4, 5, 2, 6];

// پیدا کردن اولین ظاهر
console.log(numbers.indexOf(2)); // 1
console.log(numbers.lastIndexOf(2)); // 5

// بررسی اینکه آیا عنصر وجود دارد
console.log(numbers.includes(3)); // true
console.log(numbers.includes(10)); // false

// با استفاده از منطق سفارشی پیدا کردن
const found = numbers.find((num) => num > 3); // 4
const foundIndex = numbers.findIndex((num) => num > 3); // 3
```

**تبدیل آرایه‌ها**

```javascript
const numbers = [1, 2, 3, 4, 5];

// map - transform each element
const doubled = numbers.map((num) => num * 2);
console.log(doubled); // [2, 4, 6, 8, 10]

// filter - keep only elements that pass test
const evens = numbers.filter((num) => num % 2 === 0);
console.log(evens); // [2, 4]

// reduce - accumulate values
const sum = numbers.reduce((total, num) => total + num, 0);
console.log(sum); // 15

// forEach - execute function for each element
numbers.forEach((num, index) => {
  console.log(`Number ${index}: ${num}`);
});
```

#### مثال‌های واقعی آرایه

**پردازش داده کاربر:**

```javascript
const users = [
  { id: 1, name: "Alice", age: 25, active: true },
  { id: 2, name: "Bob", age: 30, active: false },
  { id: 3, name: "Charlie", age: 35, active: true },
  { id: 4, name: "Diana", age: 28, active: true },
];

// همه کاربران فعال را بدست آورید
const activeUsers = users.filter((user) => user.active);
console.log(activeUsers);

// محاسبه سن میانگین کاربران فعال
const totalAge = users.reduce((sum, user) => sum + user.age, 0);
const averageAge = totalAge / users.length;
console.log(`Average age: ${averageAge}`);

// یک خوشامدگویی برای هر کاربر ایجاد کنید
const greetings = users.map(
  (user) => `Hello, ${user.name}! You are ${user.age} years old.`
);
console.log(greetings);
```

### ۵.۲ شیء‌ها: جمع‌آوری جفت کلید-مقدار

شیء‌ها جمع‌آوری جفت کلید-مقدار هستند، که برای نمایش واقعیت‌های واقعی مناسب هستند.

#### ایجاد و دسترسی به شیء‌ها

```javascript
// سینتکس جامد شیء
const person = {
  name: "Alice",
  age: 30,
  city: "Berlin",
  isStudent: false,
};

// دسترسی به خصوصیات
console.log(person.name); // "Alice"
console.log(person["age"]); // 30 (نحو جداکننده)
console.log(person.city); // "Berlin"

// اضافه کردن/تغییر دادن خصوصیات
person.job = "Developer";
person.age = 31;

// حذف خصوصیات
delete person.isStudent;
```

#### روش‌ها و ابزارهای شیء

```javascript
const user = { name: "Alice", age: 30, city: "Berlin" };

// همه کلیدها را بدست آورید
const keys = Object.keys(user); // ["name", "age", "city"]

// همه مقادیر را بدست آورید
const values = Object.values(user); // ["Alice", 30, "Berlin"]

// همه ورودی‌ها (جفت کلید-مقدار) را بدست آورید
const entries = Object.entries(user); // [["name", "Alice"], ["age", 30], ["city", "Berlin"]]

// بررسی اینکه آیا خصوصیت وجود دارد
console.log(user.hasOwnProperty("name")); // true
console.log("age" in user); // true

// ادغام شیء‌ها
const additionalInfo = { country: "Germany", language: "German" };
const fullProfile = { ...user, ...additionalInfo };
```

#### روش‌های شیء

```javascript
const calculator = {
  add: function (a, b) {
    return a + b;
  },
  subtract(a, b) {
    // سینتکس سرعت بر
    return a - b;
  },
  multiply: (a, b) => a * b, // تابع آرا
  divide(a, b) {
    if (b === 0) {
      throw new Error("Cannot divide by zero");
    }
    return a / b;
  },
};

console.log(calculator.add(5, 3)); // 8
console.log(calculator.multiply(4, 2)); // 8
```

### ۵.۳ جداسازی: استخراج مقادیر

جداسازی به شما اجازه می‌دهد مقادیر را از آرایه‌ها و شیء‌ها به متغیرهای جداگانه تبدیل کنید.

#### جداسازی آرایه

```javascript
const colors = ["red", "green", "blue"];

// جداسازی ساده
const [first, second, third] = colors;
console.log(first); // "red"
console.log(second); // "green"

// جداسازی عناصر
const [primary, , tertiary] = colors;
console.log(primary); // "red"
console.log(tertiary); // "blue"

// مقادیر پیش‌فرض
const [a, b, c, d = "yellow"] = colors;
console.log(d); // "yellow"

// عملگر باقیمانده
const [firstColor, ...otherColors] = colors;
console.log(otherColors); // ["green", "blue"]
```

#### جداسازی شیء

```javascript
const user = { name: "Alice", age: 30, city: "Berlin" };

// جداسازی ساده
const { name, age, city } = user;
console.log(name); // "Alice"
console.log(age); // 30

// تغییر نام متغیرها
const { name: userName, age: userAge } = user;
console.log(userName); // "Alice"
console.log(userAge); // 30

// مقادیر پیش‌فرض
const { name, age, country = "Germany" } = user;
console.log(country); // "Germany"

// جداسازی درونی
const person = {
  name: "Bob",
  address: {
    street: "123 Main St",
    city: "Berlin",
  },
};

const {
  name,
  address: { city },
} = person;
console.log(city); // "Berlin"
```

### ۵.۴ عملگرهای گسترش و باقیمانده

#### عملگر گسترش (`...`)

**آرایه‌ها**

```javascript
const fruits = ["apple", "banana"];
const moreFruits = [...fruits, "cherry", "orange"];
console.log(moreFruits); // ["apple", "banana", "cherry", "orange"]

// کپی آرایه
const fruitsCopy = [...fruits];

// ادغام آرایه‌ها
const vegetables = ["carrot", "lettuce"];
const produce = [...fruits, ...vegetables];
console.log(produce); // ["apple", "banana", "carrot", "lettuce"]
```

**شیء‌ها**

```javascript
const user = { name: "Alice", age: 30 };
const updatedUser = { ...user, age: 31, city: "Berlin" };
console.log(updatedUser); // { name: "Alice", age: 31, city: "Berlin" }

// ادغام شیء‌ها
const defaults = { theme: "dark", language: "en" };
const settings = { language: "de", notifications: true };
const finalSettings = { ...defaults, ...settings };
console.log(finalSettings); // { theme: "dark", language: "de", notifications: true }
```

#### عملگر باقیمانده (`...`)

**در پارامترهای تابع**

```javascript
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3, 4, 5)); // 15
console.log(sum(10, 20)); // 30
```

**در جداسازی**

```javascript
const [first, second, ...rest] = [1, 2, 3, 4, 5];
console.log(first); // 1
console.log(second); // 2
console.log(rest); // [3, 4, 5]

const { name, ...otherProps } = { name: "Alice", age: 30, city: "Berlin" };
console.log(name); // "Alice"
console.log(otherProps); // { age: 30, city: "Berlin" }
```

### ۵.۵ مثال‌های واقعی پردازش داده

**سبد خرید**

```javascript
const cart = [
  { id: 1, name: "Apple", price: 0.5, quantity: 3 },
  { id: 2, name: "Banana", price: 0.3, quantity: 2 },
  { id: 3, name: "Orange", price: 0.75, quantity: 1 },
];

// محاسبه کل
const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

// به دست آوردن عناصر منحصر به فرد
const uniqueItems = cart.reduce((items, item) => {
  const existing = items.find((i) => i.id === item.id);
  if (existing) {
    existing.quantity += item.quantity;
  } else {
    items.push({ ...item });
  }
  return items;
}, []);

// گروه بندی بر اساس محدوده قیمت
const groupedByPrice = cart.reduce((groups, item) => {
  const range = item.price < 0.5 ? "cheap" : "expensive";
  if (!groups[range]) groups[range] = [];
  groups[range].push(item);
  return groups;
}, {});
```

**سیستم مدیریت کاربر**

```javascript
const users = [
  { id: 1, name: "Alice", role: "admin", active: true },
  { id: 2, name: "Bob", role: "user", active: false },
  { id: 3, name: "Charlie", role: "user", active: true },
  { id: 4, name: "Diana", role: "admin", active: true },
];

// فعال بودن مدیران
const activeAdmins = users.filter(
  (user) => user.active && user.role === "admin"
);

// ایجاد جستجوی کاربر
const userLookup = users.reduce((lookup, user) => {
  lookup[user.id] = user;
  return lookup;
}, {});

// بدست آوردن آمار کاربر
const stats = users.reduce(
  (stats, user) => {
    stats.total++;
    if (user.active) stats.active++;
    if (user.role === "admin") stats.admins++;
    return stats;
  },
  { total: 0, active: 0, admins: 0 }
);
```

---

### 🎯 تکلیف برای بخش ۵

**تمرین ۱: تبدیل آرایه‌ها**

```javascript
// با: const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
// ۱. آرایه ای از مربعات با استفاده از map ایجاد کنید
// ۲. فیلتر کردن برای به دست آوردن فقط اعداد بر ۳ بخش پذیر
// ۳. مجموع همه اعداد زوج را پیدا کنید
// ۴. آرایه ای از شیء‌ها: [{value: 1, squared: 1}, {value: 2, squared: 4}, ...] ایجاد کنید
```

**تمرین ۲: عملیات شیء**

```javascript
// با: const students = [
//   { name: 'Alice', score: 85, grade: 'B' },
//   { name: 'Bob', score: 92, grade: 'A' },
//   { name: 'Charlie', score: 78, grade: 'C' }
// ]
// ۱. دانشجوی با بالاترین امتیاز را پیدا کنید
// ۲. میانگین امتیاز را محاسبه کنید
// ۳. شیء ایجاد کنید که تعداد امتیازات را نگه دارد: {A: 1, B: 1, C: 1}
// ۴. آرایه ای از نام‌ها فقط را بدست آورید
```

**تمرین ۳: جداسازی پیش‌فرض**

```javascript
// تابعی بنویسید که:
// - یک شیء با {name, age, email, city}
// - از جداسازی برای استخراج name و age استفاده کند
// - "Hello {name}, you are {age} years old" را برمی‌گرداند
// - مقادیر پیش‌فرض برای خصوصیات گم شده دارد
```

**تمرین ۴: تحمیل عملگر گسترش**

```javascript
// تابعی بنویسید که mergeObjects(obj1, obj2) را می‌گیرد که:
// - دو شیء را می‌گیرد
// - نشانی جدیدی از شیء با خصوصیات از هر دو ایجاد می‌کند
// - اگر خصوصیتی در هر دو وجود داشته باشد، مقدار از obj2 استفاده می‌شود
// با: {a: 1, b: 2} و {b: 3, c: 4} آزمایش کنید
```

**تمرین ۵: پردازش داده**

```javascript
// با آرایه ای از سفارشات:
const orders = [
  { id: 1, customer: "Alice", items: ["apple", "banana"], total: 5.5 },
  { id: 2, customer: "Bob", items: ["orange"], total: 2.25 },
  { id: 3, customer: "Alice", items: ["grape", "apple"], total: 4.75 },
];
// ۱. همه سفارشات با "Alice" را پیدا کنید
// ۲. مجموع هزینه هر مشتری را محاسبه کنید
// ۳. لیست همه عناصر منحصر به فرد خریداری شده را بدست آورید
// ۴. سفارش با بالاترین مجموع را پیدا کنید
```

---

## 🚀 بخش ۶: ویژگی‌های مدرن ES2024

ویژگی‌های مدرن جاوااسکریپت (ES2024) توانایی‌های قدرتمندی را به کد شما می‌دهد که به طور خلاصه، خوانا و نگهداری آسان‌تر می‌کند.

### ۶.۱ ماژول‌ها: سازماندهی کد

ماژول‌ها به شما اجازه می‌دهند کد را به فایل‌های جداگانه تقسیم کنید و ویژگی‌های ایمپورت/آکسپورت را ارث ببرند.

#### صادرات نام‌دار

```javascript
// mathUtils.js
export function add(a, b) {
  return a + b;
}

export function subtract(a, b) {
  return a - b;
}

export const PI = 3.14159;

// index.js
import { add, subtract, PI } from "./mathUtils.js";
console.log(add(5, 3)); // 8
console.log(subtract(10, 4)); // 6
console.log(PI); // 3.14159
```

#### صادرات پیش‌فرض

```javascript
// logger.js
export default function log(message) {
  console.log(`[LOG]: ${message}`);
}

// index.js
import log from "./logger.js";
log("Hello, world!"); // [LOG]: Hello, world!
```

#### صادرات مختلط

```javascript
// utils.js
export const VERSION = "1.0.0";

export function formatDate(date) {
  return date.toLocaleDateString();
}

export default class Calculator {
  add(a, b) {
    return a + b;
  }
  subtract(a, b) {
    return a - b;
  }
}

// index.js
import Calculator, { VERSION, formatDate } from "./utils.js";
const calc = new Calculator();
console.log(calc.add(2, 3)); // 5
console.log(VERSION); // '1.0.0'
```

### ۶.۲ عملگر خطا در جستجو (`?.`)

به طور ایمن، خصوصیات تودرتو را دسترسی داشته باشید بدون ایجاد خطا.

```javascript
const user = {
  name: "Alice",
  profile: {
    email: "alice@example.com",
    address: {
      city: "Berlin",
    },
  },
};

// آسان دسترسی به خصوصیات
console.log(user.profile?.email); // "alice@example.com"
console.log(user.profile?.phone); // undefined (بدون خطا)
console.log(user.profile?.address?.street); // undefined (بدون خطا)

// با توابع فراخوانی
const user2 = {
  name: "Bob",
  getGreeting: () => "Hello!",
};

console.log(user2.getGreeting?.()); // "Hello!"
console.log(user2.getFarewell?.()); // undefined (بدون خطا)

// مثال واقعی
function getUserCity(user) {
  return user?.profile?.address?.city ?? "Unknown";
}

console.log(getUserCity(user)); // "Berlin"
console.log(getUserCity({})); // "Unknown"
```

### ۶.۳ عملگر خطا در جستجو (`??`)

مقادیر پیش‌فرض را فقط در صورتی ارائه می‌کند که طرف چپ `null` یا `undefined` باشد.

```javascript
// نسبت به عملگر OR (||)
const input = "";
const value1 = input || "Default"; // "Default" (falsy)
const value2 = input ?? "Default"; // "" (not null/undefined)

const count = 0;
const result1 = count || 10; // 10 (falsy)
const result2 = count ?? 10; // 0 (not null/undefined)

// مثال‌های واقعی
function createUser(name, age, email) {
  return {
    name: name ?? "Anonymous",
    age: age ?? 18,
    email: email ?? "no-email@example.com",
  };
}

console.log(createUser("Alice", 0, ""));
// { name: "Alice", age: 0, email: "no-email@example.com" }

// پاسخ های API
const response = {
  data: null,
  message: "",
};

const data = response.data ?? [];
const message = response.message ?? "No message";
```

### ۶.۴ لیترال‌های قالب (پیشرفته)

```javascript
// قالب‌های نشانگر
function highlight(strings, ...values) {
  let result = "";
  strings.forEach((string, i) => {
    result += string;
    if (i < values.length) {
      result += `<span class="highlight">${values[i]}</span>`;
    }
  });
  return result;
}

const name = "Alice";
const age = 30;
const html = highlight`Hello, ${name}! You are ${age} years old.`;
// "Hello, <span class="highlight">Alice</span>! You are <span class="highlight">30</span> years old."

// رشته‌های چند خطی
const sql = `
    SELECT name, age, email
    FROM users
    WHERE active = true
    ORDER BY name
`;
```

### ۶.۵ وارد کردن ماژول به طور شرطی

ماژول‌ها را به طور شرطی یا به صورت درخواستی وارد کنید.

```javascript
// وارد کردن ماژول به طور شرطی برمی‌گرداند یک Promise
async function loadModule(moduleName) {
  try {
    const module = await import(`./modules/${moduleName}.js`);
    return module;
  } catch (error) {
    console.error(`Failed to load module: ${moduleName}`, error);
    return null;
  }
}

// استفاده
const mathModule = await loadModule("math");
if (mathModule) {
  console.log(mathModule.add(2, 3));
}

// بارگذاری شرطی
if (user.preferences.theme === "dark") {
  const darkTheme = await import("./themes/dark.js");
  darkTheme.apply();
}
```

### ۶.۶ BigInt و Symbol

#### BigInt

```javascript
// برای اعداد بزرگتر از Number.MAX_SAFE_INTEGER
const bigNumber = 9007199254740991n;
const biggerNumber = bigNumber * 2n;
console.log(biggerNumber); // 18014398509481982n

// تبدیل بین Number و BigInt
const regularNumber = 42;
const bigInt = BigInt(regularNumber);
const backToNumber = Number(bigInt);

// واقعی: انتقال ID
const userId = 123456789012345678901234567890n;
console.log(`User ID: ${userId}`);
```

#### Symbol

```javascript
// ایجاد شناسه منحصر به فرد
const id1 = Symbol("id");
const id2 = Symbol("id");
console.log(id1 === id2); // false

// به عنوان کلید شیء استفاده شود
const user = {
  [id1]: 123,
  name: "Alice",
};

console.log(user[id1]); // 123
console.log(Object.keys(user)); // ["name"] (symbols are hidden)

// علامت‌های معروف
const numbers = [1, 2, 3];
numbers[Symbol.iterator] = function* () {
  for (let i = this.length - 1; i >= 0; i--) {
    yield this[i];
  }
};

for (const num of numbers) {
  console.log(num); // 3, 2, 1 (reverse order)
}
```

### ۶.۷ جداسازی پیشرفته

```javascript
// جداسازی درونی
const data = {
  user: {
    name: "Alice",
    preferences: {
      theme: "dark",
      language: "en",
    },
  },
  settings: {
    notifications: true,
  },
};

const {
  user: {
    name,
    preferences: { theme, language },
  },
  settings: { notifications },
} = data;

console.log(name, theme, language, notifications);
// "Alice", "dark", "en", true

// جداسازی آرایه با باقیمانده
const [first, second, ...rest] = [1, 2, 3, 4, 5];
console.log(rest); // [3, 4, 5]

// تعویض متغیرها
let a = 1,
  b = 2;
[a, b] = [b, a];
console.log(a, b); // 2, 1
```

---

### 🎯 تکلیف برای بخش ۶

**تمرین ۱: سیستم ماژول**

```javascript
// دو فایل ایجاد کنید:
// ۱. stringUtils.js با صادرات: toUpperCase, toLowerCase, reverse
// ۲. index.js که همه توابع را وارد کرده و استفاده کرده است
// با: "Hello World" آزمایش کنید
```

**تمرین ۲: عملگر خطا در جستجو**

```javascript
// تابعی بنویسید که safeGet را می‌گیرد که:
// - یک شیء و مسیر (آرایه از کلیدها) را می‌گیرد
// - اگر مسیر وجود نداشته باشد، مقدار undefined را برمی‌گرداند
// مثال: safeGet(user, ['profile', 'address', 'city'])
// با شیء‌های تو در تو آزمایش کنید
```

**تمرین ۳: عملگر خطا در جستجو**

```javascript
// تابعی بنویسید که createConfig را می‌گیرد که:
// - یک شیء با خصوصیات اختیاری را می‌گیرد
// - از ?? برای ارائه مقادیر پیش‌فرض استفاده می‌کند
// - یک شیء کامل از تنظیمات را برمی‌گرداند
// با ورودی های مختلف از 0 و "" آزمایش کنید
```

**تمرین ۴: وارد کردن ماژول به طور شرطی**

```javascript
// تابعی بنویسید که:
// - یک نام ماژول را می‌گیرد
// - ماژول را به طور شرطی وارد کند
// - نتیجه ماژول یا یک جایگزین را برمی‌گرداند
// خطاهای خوب را مدیریت کنید
```

---

## 🌐 بخش ۷: دستکاری DOM و رویدادها

مدل شیء سنتیکس (DOM) چگونه جاوااسکریپت با عناصر HTML در صفحات وب کار می‌کند.

### ۷.۱ درک مدل شیء سنتیکس

مدل شیء سنتیکس یک ساختار درختی است که نمایش صفحات HTML شما را نمایش می‌دهد.

```html
<!DOCTYPE html>
<html>
  <head>
    <title>DOM Example</title>
  </head>
  <body>
    <div id="container">
      <h1>Hello World</h1>
      <p>This is a paragraph</p>
      <button id="btn">Click me</button>
    </div>
  </body>
</html>
```

این یک درخت DOM ایجاد می‌کند:

```
document
└── html
    ├── head
    │   └── title
    └── body
        └── div#container
            ├── h1
            ├── p
            └── button#btn
```

### ۷.۲ انتخاب عناصر

```javascript
// با ID (یک عنصر برگردانده می‌شود)
const title = document.getElementById("title");

// با کلاس (HTMLCollection برگردانده می‌شود)
const items = document.getElementsByClassName("item");

// با نام تگ (HTMLCollection برگردانده می‌شود)
const paragraphs = document.getElementsByTagName("p");

// سلکتورهای مدرن (پیشنهادی)
const main = document.querySelector("#main"); // عنصر تکی
const buttons = document.querySelectorAll(".btn"); // NodeList
const firstButton = document.querySelector("button"); // دکمه اول

// سلکتورهای پیچیده
const activeItems = document.querySelectorAll(".item.active");
const nestedElement = document.querySelector("#container p");
```

### ۷.۳ اصلاح عناصر

#### محتوا و خصوصیات

```javascript
const heading = document.querySelector("h1");

// محتوا
heading.textContent = "New Title";
heading.innerHTML = "<span>New</span> Title";

// خصوصیات
const link = document.querySelector("a");
link.setAttribute("href", "https://example.com");
link.getAttribute("href"); // "https://example.com"
link.removeAttribute("target");

// خصوصیات داده
const element = document.querySelector("[data-id]");
element.dataset.id = "123";
console.log(element.dataset.id); // "123"
```

#### استایل و کلاس‌ها

```javascript
const box = document.querySelector(".box");

// استایل های داخلی
box.style.backgroundColor = "red";
box.style.padding = "10px";
box.style.fontSize = "16px"; // توجه: camelCase

// کلاس‌های CSS
box.classList.add("active");
box.classList.remove("inactive");
box.classList.toggle("hidden");
box.classList.contains("active"); // true/false

// کلاس‌های چندگانه
box.className = "box active highlighted";
```

### ۷.۴ ایجاد و دستکاری عناصر

```javascript
// ایجاد عناصر جدید
const newParagraph = document.createElement("p");
newParagraph.textContent = "This is a new paragraph";
newParagraph.className = "new-paragraph";

// درج عناصر
const container = document.querySelector("#container");

// به انتها اضافه کردن
container.appendChild(newParagraph);

// درج قبل از عنصر خاص
const reference = document.querySelector("#reference");
container.insertBefore(newParagraph, reference);

// درج بعد از عنصر (بدون روش مستقیم)
reference.parentNode.insertBefore(newParagraph, reference.nextSibling);

// حذف عناصر
const toRemove = document.querySelector(".old-item");
toRemove.remove(); // روش مدرن
// یا
toRemove.parentNode.removeChild(toRemove); // روش قدیم
```

### ۷.۵ مدیریت رویدادها

#### رویدادهای پایه

```javascript
const button = document.querySelector("#myButton");

// اضافه کردن رویداد گوشته
button.addEventListener("click", function (event) {
  console.log("Button clicked!", event);
});

// حذف رویداد گوشته
function handleClick(event) {
  console.log("Button clicked!");
}
button.addEventListener("click", handleClick);
button.removeEventListener("click", handleClick);
```

#### رویدادهای متداول

```javascript
// رویدادهای ماوس
element.addEventListener("click", handleClick);
element.addEventListener("dblclick", handleDoubleClick);
element.addEventListener("mouseenter", handleMouseEnter);
element.addEventListener("mouseleave", handleMouseLeave);

// رویدادهای صفحه کلید
document.addEventListener("keydown", handleKeyDown);
document.addEventListener("keyup", handleKeyUp);

// رویدادهای فرم
form.addEventListener("submit", handleSubmit);
input.addEventListener("input", handleInput);
input.addEventListener("change", handleChange);

// رویدادهای صفحه
document.addEventListener("DOMContentLoaded", handleDOMReady);
window.addEventListener("load", handleLoad);
window.addEventListener("resize", handleResize);
```

#### شیء رویداد

```javascript
function handleEvent(event) {
  console.log("Event type:", event.type);
  console.log("Target element:", event.target);
  console.log("Current target:", event.currentTarget);

  // رویدادهای ماوس
  console.log("Mouse position:", event.clientX, event.clientY);

  // رویدادهای صفحه کلید
  console.log("Key pressed:", event.key);
  console.log("Ctrl pressed:", event.ctrlKey);

  // حذف رفتار پیش‌فرض
  event.preventDefault();

  // خاتمه رویداد
  event.stopPropagation();
}
```

### ۷.۶ مدیریت رویداد به صورت دلیلی

به جای اضافه کردن رویداد گوشته به هر عنصر، یکی را به والد اضافه کنید.

```javascript
// بدون دلیلی (ناکارآمد)
const listItems = document.querySelectorAll("li");
listItems.forEach((item) => {
  item.addEventListener("click", handleItemClick);
});

// با دلیلی (کارآمد)
const list = document.querySelector("ul");
list.addEventListener("click", function (event) {
  if (event.target.matches("li")) {
    console.log("List item clicked:", event.target.textContent);
  }
});

// مثال واقعی: لیست وظایف
const todoList = document.querySelector("#todo-list");
todoList.addEventListener("click", function (event) {
  if (event.target.matches(".delete-btn")) {
    event.target.closest("li").remove();
  } else if (event.target.matches(".complete-btn")) {
    event.target.closest("li").classList.toggle("completed");
  }
});
```

### ۷.۷ مثال‌های واقعی دستکاری DOM

#### فرم همراه با خطا

```javascript
const form = document.querySelector("#contact-form");
const emailInput = document.querySelector("#email");
const submitBtn = document.querySelector("#submit");

// اعتبارسنجی در زمان واقعی
emailInput.addEventListener("input", function () {
  const email = this.value;
  const isValid = email.includes("@") && email.includes(".");

  this.classList.toggle("invalid", !isValid);
  submitBtn.disabled = !isValid;
});

// ارسال فرم
form.addEventListener("submit", function (event) {
  event.preventDefault();

  const formData = new FormData(this);
  const data = Object.fromEntries(formData);

  console.log("Form data:", data);
  // ارسال به سرور...
});
```

#### بارگذاری محتوا به طور دلخواه

```javascript
const contentDiv = document.querySelector("#content");
const loadBtn = document.querySelector("#load-btn");

loadBtn.addEventListener("click", async function () {
  this.disabled = true;
  this.textContent = "Loading...";

  try {
    const response = await fetch("/api/data");
    const data = await response.json();

    // HTML از داده ایجاد کنید
    const html = data
      .map(
        (item) => `
            <div class="item">
                <h3>${item.title}</h3>
                <p>${item.description}</p>
            </div>
        `
      )
      .join("");

    contentDiv.innerHTML = html;
  } catch (error) {
    contentDiv.innerHTML = '<p class="error">Failed to load data</p>';
  } finally {
    this.disabled = false;
    this.textContent = "Load Data";
  }
});
```

#### سیستم مودال

```javascript
class Modal {
  constructor() {
    this.modal = document.querySelector(".modal");
    this.overlay = document.querySelector(".modal-overlay");
    this.closeBtn = document.querySelector(".modal-close");

    this.bindEvents();
  }

  bindEvents() {
    this.closeBtn.addEventListener("click", () => this.close());
    this.overlay.addEventListener("click", () => this.close());
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") this.close();
    });
  }

  open() {
    this.modal.classList.add("active");
    document.body.style.overflow = "hidden";
  }

  close() {
    this.modal.classList.remove("active");
    document.body.style.overflow = "";
  }
}

const modal = new Modal();
```

---

### 🎯 تکلیف برای بخش ۷

**تمرین ۱: لیست همراه**

یک لیست HTML و جاوااسکریپت ایجاد کنید که:

- عناصر جدیدی را به صورت ورودی اضافه می‌کند
- عناصر را هنگام کلیک بر روی آنها حذف می‌کند
- یک 'completed' کلاس را هنگام کلیک بر روی آنها تغییر می‌دهد
  از دلیلی برای کارآمدی استفاده کنید

---

**تمرین ۲: اعتبارسنج فرم**

یک فرم با نام، ایمیل و رمز عبور ایجاد کنید:

- در زمان واقعی بررسی شود که کاربر تایپ می‌کند
- پیام خطا را در زیر هر فیلد نمایش دهید
- دکمه ارسال را تا زمانی که همه فیلدها اعتبار دارند، غیرفعال کنید
- از کلاس‌های CSS برای طراحی فیلدهای معتبر/نامعتبر استفاده کنید

---

**تمرین ۳: انتخاب رنگ (Color Picker)**

در این تمرین باید یک ابزار انتخاب رنگ ساده بسازید:

- سه اسلایدر (slider) برای رنگ‌های قرمز (Red)، سبز (Green) و آبی (Blue) داشته باشید.
- وقتی مقدار هر اسلایدر را تغییر می‌دهید، یک مربع یا دایره رنگی باید همان لحظه رنگش را بر اساس مقادیر جدید RGB نشان دهد.
- مقادیر عددی هر رنگ (مثلاً: `rgb(120, 200, 50)`) را نیز به صورت متنی نمایش دهید.
- همه چیز باید به صورت زنده و همزمان با تغییر اسلایدرها به‌روزرسانی شود.

---

**تمرین ۴: مودال موجود**

    - ساخت یک سیستم مودال قابل استفاده مجدد:
    - مودال را با کلیک بر روی دکمه باز کردن
    - با دکمه X، کلیک بر روی پوشش یا کلید Escape تمام شدن
