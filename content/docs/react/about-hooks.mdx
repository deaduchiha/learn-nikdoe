---
title: ุฏุฑุจุงุฑูโ ููฺฉโูุง
description: "ุฏุฑ ุงู ุตูุญู ุจุง ููููู ููฺฉโูุง Reactุ ฺฉุงุฑุจุฑุฏ ุขูโูุง ู ูุญูู ุงุณุชูุงุฏู ุงุฒ ุขูโูุง ุฏุฑ ฺฉุงููพูููุชโ ูุง ุขุดูุง ูโุดูุฏ."
---

- **ฒฐฑณ**
  ุงููู ูุณุฎูโูุง React ููุชุดุฑ ุดุฏ. ููุท **Class Component** ูโุชูุงูุณุชูุฏ `state` ู lifecycle ุฏุงุดุชู ุจุงุดูุฏ.

- **ฒฐฑดโฒฐฑท**
  Functional Component ูุง ูุนุฑู ุดุฏูุฏ ุงูุง ุฎู ุณุงุฏู ุจูุฏูุฏุ ููุท props ูโฺฏุฑูุชูุฏ ู JSX ุจุฑูโฺฏุฑุฏุงูุฏูุฏ.
  ูุดฺฉู ฺฉู ูพุด ุขูุฏ:

  - ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ููุทู (ูุซูุงู fetch ุง event handling) ุณุฎุช ุจูุฏ.
  - ฺฉุฏูุง ูพุฑ ุงุฒ HOC ู Render Props ูโุดุฏ ู ุฎูุงูุง ุงุฒ ุจู ูโุฑูุช.

- **ฒฐฑธ (React Conf)**
  ุชู React ููฺฉโูุง ุฑุง ูุนุฑู ฺฉุฑุฏ. ุงุฏู ุงู ุจูุฏ ฺฉู:

  - state ู lifecycle ูุณุชูู ุฏุฑ Functional Components ุงุณุชูุงุฏู ุดููุฏ.
  - ููุทู ุจู ุดฺฉู ููฺฉโูุง ุณูุงุฑุด ูุงุจู ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุจุงุดุฏ.

- **ฒฐฑน (React 16.8)**
  ููฺฉโูุง ุจูโุทูุฑ ุฑุณู ูุงุฑุฏ React ุดุฏูุฏ (`useState`, `useEffect`, `useContext`, โฆ).
  ุฌุงูุนู ุดุฑูุน ุจู ููุงุฌุฑุช ุงุฒ ฺฉูุงุณโูุง ุจู ูุงูฺฉุดูโูุง ฺฉุฑุฏ.

- **ฒฐฒฐ ุจู ุจุนุฏ**
  ุชูุฑุจุงู ููู ูพุฑูฺูโูุง ู ฺฉุชุงุจุฎุงููโูุง ุจุฑ ูพุงูโ Functional Components ู ููฺฉโูุง ุณุงุฎุชู ูโุดููุฏ.
  ฺฉูุงุณโูุง ูููุฒ ูพุดุชุจุงู ูโุดููุฏ ุงูุง ุจูโูุฏุฑุช ุงุณุชูุงุฏู ูโุดููุฏ.

---

๐ **ุฌูุนโุจูุฏ:**
ููฺฉโูุง ุฏุฑ ฒฐฑธ ูุนุฑู ู ุฏุฑ ฒฐฑน ูุงุฑุฏ React ุดุฏูุฏ ุชุง state ู lifecycle ุฑุง ุจู Functional Components ุจุงูุฑูุฏุ ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ููุทู ุฑุง ุณุงุฏูโุชุฑ ฺฉููุฏ ู ูพฺุฏฺฏ ฺฉูุงุณโูุง ู HOCูุง ุฑุง ฺฉูุงุฑ ุจุฒููุฏ.

---

## ๐ ุฌุฏูู ุงููุงุน ููฺฉโูุง ูพุฑฺฉุงุฑุจุฑุฏ ุฏุฑ React

| ูุงู ููฺฉ                             | ุฏุณุชูโุจูุฏ              | ูุงุฒ/ฺฉุงุฑุจุฑุฏ ุงุตู                                                                     |
| ----------------------------------- | ---------------------- | ------------------------------------------------------------------------------------ |
| **useState**                        | State Management       | ูฺฏูุฏุงุฑ ู ุจูโุฑูุฒุฑุณุงู state ูุญู (ูุซู ุดูุงุฑูุฏูุ ูุฑูุ ููุชุฑูุง)                         |
| **useReducer**                      | State Management       | ูุฏุฑุช state ูพฺุฏู ุจุง ุงูฺฏู reducer (ุฌุงฺฏุฒู ุณุงุฏูโ Redux ุจุฑุง ููฺฉุงู)               |
| **useContext**                      | Context                | ุฏุณุชุฑุณ ุจู ุฏุงุฏูโ Context ุจุฏูู prop drilling (ูุซู themeุ authุ language)              |
| **useEffect**                       | Side Effects           | ุงุฌุฑุง ฺฉุงุฑูุง ุฌุงูุจ ุจุนุฏ ุงุฒ render (ูุซู fetch ุฏุชุงุ event listenerุ ุชุงูุฑ)             |
| **useLayoutEffect**                 | Side Effects           | ูุดุงุจู useEffect ุงูุง ูุจู ุงุฒ paint ูุฑูุฑฺฏุฑ ุงุฌุฑุง ูโุดูุฏ (ุจุฑุง ููุงููฺฏ DOM ู ุงูุฏุงุฒูโฺฏุฑ) |
| **useRef**                          | References             | ุฏุณุชุฑุณ ูุณุชูู ุจู ฺฉ ุนูุตุฑ DOM ุง ูฺฏูุฏุงุฑ ฺฉ ููุฏุงุฑ mutable ุจุฏูู re-render              |
| **useMemo**                         | Performance            | ฺฉุด ฺฉุฑุฏู ูุชุฌูโ ูุญุงุณุจุงุช ุณูฺฏู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฌุฑุง ุฏูุจุงุฑู                           |
| **useCallback**                     | Performance            | ฺฉุด ฺฉุฑุฏู ุฎูุฏ ุชุงุจุน ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุฌุงุฏ ุชุงุจุน ุฌุฏุฏ ุฏุฑ ูุฑ render (ูุฎุตูุตุงู ุจุฑุง props)   |
| **useImperativeHandle**             | Advanced / Forward Ref | ฺฉูุชุฑู ฺฉุฑุฏู APIโ ฺฉู ููุช ุงุฒ forwardRef ุงุณุชูุงุฏู ูโฺฉู ุจู parent ุฏุงุฏู ูโุดูุฏ         |
| **useDebugValue**                   | Debugging              | ููุงุด ุงุทูุงุนุงุช ุณูุงุฑุด ุฏุฑ React DevTools ุจุฑุง ููฺฉโูุง ุณูุงุฑุด                           |
| **useId** (ุงุฒ React 18)             | Accessibility / IDs    | ุชููุฏ id ฺฉุชุง ุฏุฑ ุณูุช ุณุฑูุฑ ู ฺฉูุงูุช ุจุฑุง ูุฑูโูุง ุง ุงูููุชโูุง ูุฑุชุจุท                    |
| **useTransition** (React 18)        | Concurrent Features    | ูุฏุฑุช ุขูพุฏุชโูุง UI ฺฉู ูโุชูุงูุฏ ุนูุจ ุจูุชุฏ (defer) ุจุฏูู ุจูุงฺฉ ฺฉุฑุฏู ุชุนุงููุงุช ุณุฑุน        |
| **useDeferredValue** (React 18)     | Concurrent Features    | ฺฏุฑูุชู ฺฉ ูุณุฎูโ "ุจุง ุชุฃุฎุฑ" ุงุฒ ฺฉ ููุฏุงุฑ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ฺฉูุฏ UI                       |
| **useSyncExternalStore** (React 18) | External Store         | ุงุชุตุงู ุงูู ุจู ุงุณุชูุฑูุง ู ฺฉุชุงุจุฎุงููโูุง ูุฏุฑุช state ุฎุงุฑุฌ (ูุซู Redux)                  |
| **useInsertionEffect** (React 18)   | Low-level              | ุงุฌุฑุง ูุจู ุงุฒ ุชูุงู ุงูฺฉุชโูุง ุจุฑุง ุฏุฑุฌ ุงุณุชุงู ุง ฺฉุงุฑูุง ุฎู ุณุทุญ ูพุงู                    |

---

๐ **ุฎูุงุตู:**

- ุงฺฏุฑ **state ุณุงุฏู** ุฏุงุฑ โ `useState`.
- ุงฺฏุฑ **state ูพฺุฏู** ุฏุงุฑ โ `useReducer`.
- ุงฺฏุฑ **ฺฉุงุฑ ุฌุงูุจ** ุฏุงุฑ (ูุซู fetch ุง event) โ `useEffect`.
- ุงฺฏุฑ **ุจูููโุณุงุฒ ฺฉุงุฑุง** ูโุฎูุง โ `useMemo` ู `useCallback`.
- ุงฺฏุฑ **ุฏุงุฏู ูุดุชุฑฺฉ ุจู ูุงูโูุง** ุฏุงุฑ โ `useContext`.
- ุจุฑุง **ูพุดุฑูุชูโูุง ู ุฑูุฏุฑ ููุฒูุงู** โ `useTransition`, `useDeferredValue` ู ุบุฑู.

---

### ฑ.ณ `useContext`

**Context ฺุณุชุ** React Context ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ฺฉ ููุฏุงุฑ (ูุฑ ุฏุงุฏู JavaScript) ุฑุง ุงุฒ ุทุฑู ุฏุฑุฎุช ฺฉุงููพูููุช ุฎูุฏ ุจุฏูู ุงูฺฉู ูุฌุจูุฑ ุจุงุดุฏ props ุฑุง ุจู ุตูุฑุช ุฏุณุช ุฏุฑ ูุฑ ุณุทุญ ููุชูู ฺฉูุฏุ ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ. ููฺฉ `useContext` ุณุงุฏูโุชุฑู ุฑุงู ุจุฑุง ูุตุฑู ุขู ููุฏุงุฑ ูุดุชุฑฺฉ ุฏุฑ ฺฉ ฺฉุงููพูููุช ุชุงุจุน ุงุณุช.

---

### ฑ.ด `useRef`

`useRef` ฺฉ ููฺฉ React ุงุณุช ฺฉู ุจู ุดูุง ฺฉ **ููุฏุงุฑ ูุงุจู ุชุบุฑ ูโุฏูุฏ ฺฉู ุฏุฑ ุทูู ุฑูุฏุฑูุง ุจุงู ูโูุงูุฏ ุงูุง ุจุงุนุซ re-render ููโุดูุฏ ููุช ุชุบุฑ ูโฺฉูุฏ.**

ุดูุง ููฺูู ูโุชูุงูุฏ ุงุฒ ุขู ุจุฑุง ฺฏุฑูุชู ฺฉ **ูุฑุฌุน ุจู ฺฉ ุนูุตุฑ DOM** ุงุณุชูุงุฏู ฺฉูุฏุ ฺฉู ุฑุงุฌโุชุฑู ููุฑุฏ ุงุณุชูุงุฏู ุงุณุช.

---

#### ฑ.ด.ฑ ูุญู

```tsx
const ref = useRef<T | null>(initialValue);
```

ุงูุฌุง:

- `T` ููุน ููุฏุงุฑ ุงุณุช (ูุซู `HTMLInputElement`ุ `number`ุ ู ุบุฑู).
- `initialValue` ูุนูููุงู `null` ุงุณุช ุงฺฏุฑ ุจุง ุนูุงุตุฑ DOM ฺฉุงุฑ ูโฺฉูุฏ.

---

#### ฑ.ด.ฒ ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู

    โ ููุช ูุงุฒ ุฏุงุฑุฏ:

    - ุฏุงุฏู **ูุงุจู ุชุบุฑ** ุฑุง ุฐุฎุฑู ฺฉูุฏ ฺฉู **ุจุฑ ุฑูุฏุฑ ฺฉุฑุฏู ุชุฃุซุฑ ููโฺฏุฐุงุฑุฏ**.
    - ุฏุณุชุฑุณ **ูุณุชูู DOM** ุจฺฏุฑุฏ (ูุซู ููฺฉูุณ ฺฉุฑุฏู ฺฉ ูุฑูุฏุ ุงุณฺฉุฑูู ฺฉุฑุฏู ฺฉ divุ ู ุบุฑู).

---

#### ฑ.ด.ณ ูุซุงู ูุจุชุฏ โ ููฺฉูุณ ูุฑูุฏ

ฺฉ ูุซุงู ฺฉูุงุณฺฉ ุงุฒ ุฏุณุชุฑุณ ุจู ฺฉ ุนูุตุฑ DOM ู ูุฑุงุฎูุงู ูุชุฏ `.focus()` ุขู.

```tsx
import { useRef } from "react";

function FocusInput() {
  const inputRef = useRef<HTMLInputElement>(null);

  const handleFocus = () => {
    inputRef.current?.focus();
  };

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleFocus}>ููฺฉูุณ</button>
    </>
  );
}

export default FocusInput;
```

    **ฺู ุงุชูุงู ูโุงูุชุฏุ**

    ฑ๏ธโฃ ุฏุฑ ุงููู ุฑูุฏุฑุ `inputRef.current` ุจุฑุงุจุฑ `null` ุงุณุช.
    ฒ๏ธโฃ ูพุณ ุงุฒ ุงูฺฉู React `<input />` ุฑุง ุฑูุฏุฑ ฺฉุฑุฏุ ฺฏุฑู DOM ุฑุง ุจู `inputRef.current` ุงุฎุชุตุงุต ูโุฏูุฏ.
    ณ๏ธโฃ ฺฉูฺฉ ฺฉุฑุฏู ุฑู ุฏฺฉูู ูุชุฏ `.focus()` ุฑุง ุฑู ุขู ฺฏุฑู DOM ูุฑุงุฎูุงู ูโฺฉูุฏ.

---

#### ฑ.ด.ด ุจูุชุฑู ุดููโูุง

โ ุงุฒ `useRef` ุงุณุชูุงุฏู ฺฉูุฏ:

- ุจุฑุง ุฏุณุชุฑุณ DOM (`inputRef`ุ `scrollRef`ุ ู ุบุฑู).
- ุจุฑุง **ููุงุฏุฑ ูุงุจู ุชุบุฑ** ฺฉู ูุงุฒ ุจู ุดุฑูุน re-render ูุฏุงุฑูุฏ.

โ ุงุฒ `useRef` ุจุฑุง ููุงุฑุฏ ุฒุฑ ุงุณุชูุงุฏู ูฺฉูุฏ:

- ุญุงูุช ฺฉู ุจุฑ ุขูฺู ุฏุฑ UI ูโุจูุฏ ุชุฃุซุฑ ูโฺฏุฐุงุฑุฏ โ ุจู ุฌุง ุขู ุงุฒ `useState` ุงุณุชูุงุฏู ฺฉูุฏ.

๐ฏ ref ูุง DOM ุฑุง ุจุง `null` ููุฏุงุฑุฏู ุงููู ฺฉูุฏุ ู ููุดู ูุจู ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุขูโูุง ุจุง optional chaining (`?.`) ุจุฑุฑุณ ฺฉูุฏ.

---

#### ฑ.ด.ต ูุซุงู ูุชูุณุท โ ุงุณฺฉุฑูู ุจู ุจุงูุง

ฺฉ ุตูุญู ุทููุงู ฺฉู ูโุชูุงูุฏ ุจู ุจุงูุง ุขู ุงุณฺฉุฑูู ฺฉูุฏ.

```tsx
import { useRef } from "react";

function ScrollToTop() {
  const containerRef = useRef<HTMLDivElement>(null);

  const handleScrollTop = () => {
    containerRef.current?.scrollTo({ top: 0, behavior: "smooth" });
  };

  return (
    <div>
      <button onClick={handleScrollTop}>ุงุณฺฉุฑูู ุจู ุจุงูุง</button>
      <div
        ref={containerRef}
        style={{
          height: "200px",
          overflow: "auto",
          border: "1px solid black",
          marginTop: "10px",
        }}
      >
        <div style={{ height: "800px" }}>
          <p>ูุญุชูุง ุฒุงุฏ ุงูุฌุง. ุจู ุงุณฺฉุฑูู ฺฉุฑุฏู ุงุฏุงูู ุฏูุฏ...</p>
        </div>
      </div>
    </div>
  );
}

export default ScrollToTop;
```

---

#### ฑ.ด.ถ ูุซุงู ูพุดุฑูุชู โ ุฐุฎุฑู ุชุงุฑุฎฺู ฺฉูฺฉโูุง ุจุฏูู Re-render

ุดูุง ูโุชูุงูุฏ ุงุฒ `useRef` ุจุฑุง ุฐุฎุฑู ุฏุงุฏู **ุฏุฑ ุทูู ุฑูุฏุฑูุง** ุงุณุชูุงุฏู ฺฉูุฏุ ุญุช ุงฺฏุฑ ุฑู ุตูุญู ููุงุด ุฏุงุฏู ูุดูุฏุ ู ุจุงุนุซ re-render ููโุดูุฏ.

```tsx
import { useRef, useState } from "react";

function ClickHistory() {
  const [count, setCount] = useState(0);
  const historyRef = useRef<number[]>([]);

  const handleClick = () => {
    setCount((prev) => {
      const newCount = prev + 1;
      historyRef.current.push(newCount); // ุฐุฎุฑู ุฏุฑ ุชุงุฑุฎฺู
      return newCount;
    });
  };

  const showHistory = () => {
    alert(`ุชุงุฑุฎฺู: ${historyRef.current.join(", ")}`);
  };

  return (
    <>
      <p>ุชุนุฏุงุฏ ูุนู: {count}</p>
      <button onClick={handleClick}>ุงูุฒุงุด</button>
      <button onClick={showHistory}>ููุงุด ุชุงุฑุฎฺู</button>
    </>
  );
}

export default ClickHistory;
```

---

ฺู ุงุชูุงู ูโุงูุชุฏุ

โ ูุฑ ุจุงุฑ ฺฉู ุฑู **ุงูุฒุงุด** ฺฉูฺฉ ูโฺฉูุฏุ `count` ุฑุง ุงูุฒุงุด ูโุฏูู.
โ ุฏุฑ ููุงู ุฒูุงูุ ุชุนุฏุงุฏ ุฌุฏุฏ ุฑุง ุฏุฑ ุขุฑุงู `historyRef.current` ุฐุฎุฑู ูโฺฉูู.
โ ุงู ุชุงุฑุฎฺู **ุจุงุนุซ** re-render ููโุดูุฏ โ ููุท ฺฉ ุฐุฎุฑูโุณุงุฒ ุขุฑุงู ุงุณุช.
โ ููุช ุฑู **ููุงุด ุชุงุฑุฎฺู** ูุดุงุฑ ูโุฏูุฏุ ุชูุงู ุชุนุฏุงุฏูุง ูุจู ุฑุง ูุดุงู ูโุฏูุฏ.

---

ฺุฑุง ุงู ุฎูุจ ุงุณุช:

- ุดูุง ุงุฏ ูโฺฏุฑุฏ ฺฉู `useRef` ฺฺฏููู ุฏุงุฏู ุฑุง ุฏุฑ ุทูู ุฑูุฏุฑูุง ูฺฏู ูโุฏุงุฑุฏ.
- ูุงุฒ ุจู ุงุณุชูุงุฏู ุงุฒ `useEffect` ูุฏุงุฑุฏ.
- ูุดุงู ูโุฏูุฏ ฺฉู `useRef` _ูุงฺฉูุด ูุณุช_ โ ููุท ุฏุงุฏู ุฑุง ุขุฑุงู ุฐุฎุฑู ูโฺฉูุฏ.

---

ุณูุงุฑููุง ุฏูุง ูุงูุน

โ ููฺฉูุณ ฺฉุฑุฏู ฺฉ ูุฑูุฏ ููุช ฺฉ modal ุจุงุฒ ูโุดูุฏ.
โ ุงุณฺฉุฑูู ฺฉุฑุฏู ฺฉ ูพูุฌุฑู ฺุช ุจู ูพุงู ููุช ูพุงู ุฌุฏุฏ ูโุฑุณุฏ.
โ ุฐุฎุฑู ID ูุง interval ุง ุชุงูุฑูุง.
โ ุงูุฏุงุฒูโฺฏุฑ ุงุจุนุงุฏ ุนูุตุฑ ุจุง `getBoundingClientRect`.

---

#### ฑ.ด.ท ุฌุฏูู ุฎูุงุตู

| ูฺฺฏ                           | `useRef`                            |
| ------------------------------- | ----------------------------------- |
| ุจุงุนุซ ุฑูุฏุฑ ูโุดูุฏุ               | โ ุฎุฑ                              |
| ุนูุตุฑ DOM ุฐุฎุฑู ูโฺฉูุฏุ          | โ ุจูู                              |
| ููุงุฏุฑ ูุงุจู ุชุบุฑ ุฐุฎุฑู ูโฺฉูุฏุ | โ ุจูู                              |
| ุจูุชุฑู ุจุฑุง ุญุงูุช UIุ            | โ ุฎุฑ (ุงุฒ `useState` ุงุณุชูุงุฏู ฺฉูุฏ) |

---

#### ฑ.ด.ธ ุชูุฑู ุฎุงูฺฏ

- ูุจุชุฏ:

  - ฺฉ ูุฑู ุจุณุงุฒุฏ ฺฉู ฺฉูฺฉ ฺฉุฑุฏู ุฑู ุฏฺฉูู ุงููู ููุฏ ุฎุงู ุฑุง ููฺฉูุณ ฺฉูุฏ.

- ูุชูุณุท:

  - ฺฉ `div` ุงุณฺฉุฑููโุดููุฏู ุจุง ููุงุฑุฏ ุฒุงุฏ ุจุณุงุฒุฏ ู ุฏฺฉููโุง ุจุฑุง ุงุณฺฉุฑูู ุจู ูพุงู ุง ุจุงูุง ุจู ุตูุฑุช ูุฑู.

- ูพุดุฑูุชู:

  - ฺฉุงููพูููุช ุจุณุงุฒุฏ ฺฉู ูููุนุช ูุจู ู ูุนู ูุงูุณ ุฑุง ูพฺฏุฑ ฺฉูุฏุ ูููุนุช ูุจู ุฑุง ููุท ุงุฒ ุทุฑู `useRef` ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

---

#### ฑ.ด.น ุฎูุงุตู

โจ `useRef` ุนุจุงุฑุช ุงุณุช ุงุฒ:

- ุฑุงู ุจุฑุง ูฺฏู ุฏุงุดุชู ฺฉ ููุฏุงุฑ ูพุงุฏุงุฑ ุจุฏูู ุงูฺฉู ุจุงุนุซ re-render ุดูุฏ.
- ุฑูุด ุงุตู ุจุฑุง ุฏุณุชุฑุณ ุจู ฺฏุฑูโูุง DOM.

---

### ฑ.ต `useEffect`

#### ฑ.ต.ฑ useEffect ุฏููุงู ฺูุ (ุฏุฑ ฺฉ ูฺฏุงูู ุชุตูุฑ)

ููุช ุฑุงุจุท ฺฉุงุฑุจุฑ (UI) ุฑูุฏุฑ ูโุดูุฏุ ฺฏุงู ูุงุฒู ุงุณุช ฺฉุงุฑูุง ุงูุฌุงู ุฏูู ฺฉู ุฎุงุฑุฌ ุงุฒ ููุทู ุฏุงุฎู React ูุณุชูุฏ. ุจู ุงู ฺฉุงุฑูุง **Side Effect** ฺฏูุชู ูโุดูุฏ.

- **fetch** ุชุนุงูู ุจุง api
- **setTimeout / setInterval** ุจุฑุง ูุฏุฑุช ุฒูุงูโุจูุฏ
- **window\.addEventListener** ุจุฑุง ฺฏูุด ุฏุงุฏู ุจู ุฑุฎุฏุงุฏูุง ูุฑูุฑฺฏุฑ
- **localStorage.setItem / getItem** ุจุฑุง ุฐุฎุฑู ุง ุฎูุงูุฏู ุฏุงุฏูโูุง ุงุฒ ุญุงูุธู ูุฑูุฑฺฏุฑ

ุชูุงู ุงู ฺฉุงุฑูุง ุฑุง ุจุงุฏ ุจุง **`useEffect`** ุงูุฌุงู ุฏูู.

<Mermaid
  chart="
sequenceDiagram
  autonumber
  participant R as ๐๏ธ Render()
  participant C as ๐ Commit (DOM)
  participant E as โก useEffect(callback, deps)
  participant CL as ๐งน Cleanup (return)

R->>C: ูุฑุญููโ ุฑูุฏุฑ ู commit ุดุฏู UI
C->>E: ุงุฌุฑุง useEffect (ุจุนุฏ ุงุฒ paint ุตูุญู)
E-->>CL: ุจุฑฺฏุฑุฏุงูุฏู ุชุงุจุน cleanup (ุงุฎุชุงุฑ)
Note over E,CL: ููุช ูุงุจุณุชฺฏโูุง ุชุบุฑ ฺฉููุฏ ุง <br/>ฺฉุงููพูููุช unmount ุดูุฏ
CL->>E: ุงุฌุฑุง cleanup ูุจู
E->>E: ุงุฌุฑุง ุงุซุฑ ุฌุฏุฏ
"
/>

---

#### ฑ.ต.ฒ ุฑูุชุงุฑ useEffect ุจุณุชู ุจู dependency array

- **ููุช ุขุฑุงู ุฎุงู ุจุงุดุฏ: `[]`**

      - ุงุซุฑ (Effect) ููุท **ฺฉ ุจุงุฑ** ุจุนุฏ ุงุฒ mount ุดุฏู ฺฉุงููพูููุช ุงุฌุฑุง ูโุดูุฏ.
      - ุฏุฑ ูุญุท **StrictMode**ุ React ฺฉโุจุงุฑ **ุงุฌุฑุง ุงุซุฑ โ ูพุงฺฉุณุงุฒ โ ุงุฌุฑุง ุฏูุจุงุฑู ุงุซุฑ** ุฑุง ุดุจูโุณุงุฒ ูโฺฉูุฏ.

ุงู ฺฉุงุฑ ุจุฑุง ฺฉูฺฉ ุจู ูพุฏุง ฺฉุฑุฏู ุจุงฺฏโูุงุณุช ู ุฏุฑ ูุณุฎูโ ููุง (production) ููุท ฺฉโุจุงุฑ ุงุฌุฑุง ุฎูุงูุฏ ุดุฏ.

- **ููุช ูุงุจุณุชฺฏโูุง ูุดุฎุต ุจุงุดูุฏ: `[a, b]`**

  - ุงุซุฑ ููุท ููุช ุฏูุจุงุฑู ุงุฌุฑุง ูโุดูุฏ ฺฉู **ฺฉ ุงุฒ ููุงุฏุฑ `a` ุง `b` ุชุบุฑ ฺฉูุฏ**.
  - ุงู ุญุงูุช ุฑุงุฌโุชุฑู ฺฉุงุฑุจุฑุฏ `useEffect` ุงุณุชุ ฺูู ุฏููุงู ฺฉูุชุฑู ูโฺฉูู ฺู ุฒูุงู ุฏูุจุงุฑู ุงุฌุฑุง ุดูุฏ.

- **ููุช ูฺ ุขุฑุงูโุง ุฏุงุฏู ูุดูุฏ: (ุจุฏูู deps)**

- ุงุซุฑ ุจุนุฏ ุงุฒ **ูุฑ ุจุงุฑ ุฑูุฏุฑ ุดุฏู** ฺฉุงููพูููุช ุงุฌุฑุง ูโุดูุฏ.
- ุงุณุชูุงุฏู ุงุฒ ุงู ุญุงูุช ูุนูููุงู ุชูุตู ููโุดูุฏุ ฺูู ูโุชูุงูุฏ ุจุงุนุซ **ุญูููโ ุจโููุงุช** ุดูุฏ ูฺฏุฑ ุงูโฺฉู ุฏููุงู ุจุฏุงูู ฺู ูโฺฉูู.

---

**ูฺฉุชูโ ููู (Best Practice)**

ุจุฑุง ุงูฺฉู ูุฑุงููุด ูฺฉูุฏ ุชูุงู ูุงุจุณุชฺฏโูุง ุฑุง ุฏุฑ ุขุฑุงู ูุฑุงุฑ ุฏูุฏุ ุญุชูุงู **ูุงููู ESLint ุจู ูุงู `react-hooks/exhaustive-deps`** ุฑุง ูุนุงู ฺฉูุฏ. ุงู ูุงููู ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุจู ุดูุง ูุดุฏุงุฑ ูโุฏูุฏ ุงฺฏุฑ ฺุฒ ุฑุง ุฌุง ุงูุฏุงุฎุชู ุจุงุดุฏ.

---

#### ฑ.ต.ณ ูุซุงู ฑ โ ุขุณุงู: ููฺฏุงูโุณุงุฒ ุนููุงู ุตูุญู ุจุง ุดูุงุฑูุฏู

ฺฉุงุฑ ฺฉู ูโุฎูุงูู: ููุช ุนุฏุฏ ุชุบุฑ ฺฉุฑุฏุ ุนููุงู ุชุจ ูุฑูุฑฺฏุฑ ูู ุจูโุฑูุฒ ุดูุฏ.

```tsx
import { useEffect, useState } from "react";

export default function CounterTitle() {
  const [count, setCount] = useState(0);

  // Effect: update the tab title whenever count changes
  useEffect(() => {
    document.title = `Counter: ${count}`;
  }, [count]); // โ Dependency: only when count changes

  return (
    <button onClick={() => setCount((c) => c + 1)}>Increase: {count}</button>
  );
}
```

**ฺุฑุง ุฏุฑุณุช ุงุณุชุ** ฺูู ูุง ุฏุฑ ุงู ุงุซุฑ ุจุง ยซุฏูุง ุจุฑููยป (DOM ุณุฑุงุณุฑ: `document.title`) ููฺฏุงู ูโุดูู ู ููุท ุจู `count` ูุงุฒ ุฏุงุฑู.

---

#### ฑ.ต.ด ูุซุงู ฒ โ ูุชูุณุท: ุฌุณุชโูุฌู ุฏโุจููุณ + ุฏุฑุฎูุงุณุช ุดุจฺฉู ุจุง ูุบู

ูุฏู: ููุช ฺฉุงุฑุจุฑ ุชุงูพ ูโฺฉูุฏุ ณฐฐms ุตุจุฑ ฺฉููุ ุงฺฏุฑ ฺุฒ ุชุงูพ ูุดุฏุ ุฏุฑุฎูุงุณุช ุจุฒููุ ุงฺฏุฑ ฺฉุงุฑุจุฑ ุนูุถ ฺฉุฑุฏ/ุตูุญู ุจุณุชู ุดุฏุ ุชุงูุฑ ู ุฏุฑุฎูุงุณุช ูุจู **ูุบู** ุดููุฏ.

```tsx
import { useEffect, useState } from "react";

type Item = { id: string; name: string };

export default function DebouncedSearch(): JSX.Element {
  const [query, setQuery] = useState(""); // user typing input
  const [debounced, setDebounced] = useState(""); // debounced value after 300ms
  const [data, setData] = useState<Item[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // 1) Debounce input
  useEffect(() => {
    const timer = setTimeout(() => setDebounced(query.trim()), 300);
    return () => clearTimeout(timer); // cleanup timer on input change/unmount
  }, [query]);

  // 2) Fetch when debounced value changes
  useEffect(() => {
    if (!debounced) {
      setData([]);
      setError(null);
      return;
    }

    const controller = new AbortController(); // to cancel request
    setLoading(true);
    setError(null);

    (async () => {
      try {
        const res = await fetch(
          `/api/search?q=${encodeURIComponent(debounced)}`,
          { signal: controller.signal }
        );
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const json: Item[] = await res.json();
        setData(json);
      } catch (e: unknown) {
        if ((e as any).name === "AbortError") return; // ignore if aborted
        setError((e as Error).message);
      } finally {
        setLoading(false);
      }
    })();

    return () => controller.abort(); // cancel request on dependency change/unmount
  }, [debounced]);

  return (
    <div className="space-y-2">
      <input
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="Search..."
        className="border p-2 rounded"
      />
      {loading && <p>Loading...</p>}
      {error && <p role="alert">Error: {error}</p>}
      <ul>
        {data.map((item) => (
          <li key={item.id}>{item.name}</li>
        ))}
      </ul>
    </div>
  );
}
```

<Mermaid
  chart="
flowchart TD
  A[onChange] -->|update query| B[useEffect debounce]
  B -->|300ms| C[set debounced]
  C --> D[useEffect fetch]
  D -->|Abort on change/unmount| E[cleanup]
"
/>

**ูฺฉุชูโูุง ฺฉูุฏ**

- ููุดู ุจุฑุง IO ุงุฒ **AbortController** ุง ุฑูุด ูุบูู ฺฉุชุงุจุฎุงููู ุฎูุฏุช ุงุณุชูุงุฏู ฺฉู.
- ุงุซุฑูุง ุจุงุฏ **ุชุญููู ุฑุงูโุงูุฏุงุฒ ุฏูุจุงุฑู** ุฏุฑ ุชูุณุนู ุฑุง ุฏุงุดุชู ุจุงุดูุฏ (StrictMode).

---

#### ฑ.ต.ต ูุซุงู ณ โ ุญุฑููโุง ูู ูุงุจูโูุถู: ููฺฏุงูโุณุงุฒ ุชู ุจุง localStorage + ููฺฏุงูโุณุงุฒ ุจู ุชุจโูุง

ุงู ูุซุงู ูู ุญุฑููโุง ุงุณุช ู ูู ููููุณ: ุจุง ฺฉูฺฉ ฺฉุงุฑุจุฑุ **ุชู (ุฑูุดู/ุชุงุฑฺฉ)** ุฑุง ุฐุฎุฑู ูโฺฉูู ู ุจู ุชุจโูุง ุจุงุฒู ูุฑูุฑฺฏุฑ ููฺฏุงู ูฺฏู ูโุฏุงุฑู. ุนูุงูู ุจุฑ ุขูุ ุชู ุฑุง ุฑู **DOM ุฎุงุฑุฌ ุงุฒ React** ูู ุงุนูุงู ูโฺฉูู (side-effect ูุงูุน).

```tsx
import { useEffect, useState } from "react";

// A small custom hook to keep state in localStorage and sync it across tabs
function useLocalStorageState<T>(key: string, initial: T) {
  // Lazily read the initial value from localStorage (to avoid SSR issues)
  const [value, setValue] = useState<T>(() => {
    try {
      const raw = localStorage.getItem(key);
      return raw ? (JSON.parse(raw) as T) : initial;
    } catch {
      return initial;
    }
  });

  // Side effect: whenever the value changes, write it to localStorage
  useEffect(() => {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch {}
  }, [key, value]);

  // Cross-tab synchronization: if another tab changes the value,
  // update this tabโs state as well
  useEffect(() => {
    const onStorage = (e: StorageEvent) => {
      if (e.key !== key) return;
      try {
        setValue(e.newValue ? (JSON.parse(e.newValue) as T) : initial);
      } catch {}
    };
    window.addEventListener("storage", onStorage);
    return () => window.removeEventListener("storage", onStorage);
  }, [key, initial]);

  return [value, setValue] as const;
}

export default function ThemeToggle() {
  const [theme, setTheme] = useLocalStorageState<"light" | "dark">(
    "theme",
    "light"
  );

  // Apply the theme directly to the DOM (outside React)
  useEffect(() => {
    // Alternatively, you could use classList instead
    document.documentElement.dataset.theme = theme;
  }, [theme]);

  return (
    <div>
      <p>Current theme: {theme}</p>
      <button
        onClick={() => setTheme((t) => (t === "light" ? "dark" : "light"))}
      >
        Switch to {theme === "light" ? "dark" : "light"}
      </button>
    </div>
  );
}
```

<Mermaid
  chart="
flowchart TD
  U[User Click] -->|setTheme| S[State ุชุบุฑ ูโฺฉูุฏ]
  S --> E1[Effect ููุดุชู ุฏุฑ localStorage]
  E1 --> LS[(localStorage)]
  LS -->|storage event| E2[Effect ูุณูุฑ ุชุจ ุฏฺฏุฑ]
  S --> E3[Effect ุงุนูุงู ุฑู DOM]
  E3 --> D[document.documentElement]
"
/>

**ฺุฑุง ุงู ุงูฺฏู ุฎูุจ ุงุณุชุ**

- ุฏู ุงุซุฑู ูุงุถุญ ู ูุณุชูู: ฺฉ ุจุฑุง **ููุดุชู ุฏุฑ localStorage**ุ ฺฉ ุจุฑุง **ูุณูุฑ storage**.
- `cleanup` ูุณูุฑ ุฑุง ุจุฑูโุฏุงุฑุฏ โ **memory leak** ูุฏุงุฑู.
- ุงุนูุงู ุชู ุฑู DOM ูููููโ ูุงุถุญ ุงุฒ side-effect ุฎุงุฑุฌ ุงุฒ React ุงุณุช.

---

#### ฑ.ต.ถ ุงุดุชุจุงูุงุช ูพุฑุชฺฉุฑุงุฑ (ู ูุณุฎูู ฺฉูุชุงูู ุฏุฑูุงู)

- ูุงุจุณุชฺฏ ูุงูุต (Missing Dependencies)

  - **ูุดฺฉู:** ุงุซุฑ (effect) ุจุง **ุฏุงุฏูโ ูุฏู** ุงุฌุฑุง ูโุดูุฏ ฺูู ูููโ ูุชุบุฑูุง ูุงุฒู ุฏุฑ ุขุฑุงูโ ูุงุจุณุชฺฏโูุง (`deps`) ูุณุชูุฏ.

    ูุฑ ฺุฒ ุฑุง ฺฉู ุฏุงุฎู ุงุซุฑ ุงุณุชูุงุฏู ูโฺฉู ุจุงุฏ ุฏุฑ `deps` ุจููุณ. - ุงฺฏุฑ ููโุฎูุงู ููุฏุงุฑุด ุฏุฑ ูุฑ ุชุบุฑ ุจุงุนุซ ุงุฌุฑุง ุฏูุจุงุฑู ุดูุฏุ ุงุฒ `useRef` ุง ฺฉ **callback ูพุงุฏุงุฑ** (ูุซู `useCallback`) ุงุณุชูุงุฏู ฺฉู.

- ูุดุช ุญุงูุธู (Memory Leak)

  - **ูุดฺฉู:** ฺฉ ุชุงูุฑ (`setInterval` / `setTimeout`)ุ ูุณูุฑ ุฑูุฏุงุฏ (`addEventListener`) ุง ุฏุฑุฎูุงุณุช async ุงุฌุงุฏ ฺฉุฑุฏูโุงุ ุงูุง ุฏุฑ ุฒูุงู ููุงุณุจ ูพุงฺฉ ููโุดูุฏ. ุงู ฺฉุงุฑ ุจุงุนุซ ูุตุฑู ุงุถุงููโ ุญุงูุธู ู ุจุงฺฏ ูโุดูุฏ.

    ููุดู ุงุฒ `useEffect` ฺฉ **ุชุงุจุน ูพุงฺฉุณุงุฒ** (`cleanup`) ุจุฑฺฏุฑุฏุงู ุชุง ฺฉุงุฑูุง ูููโุชูุงู ุฑุง ูุบู ุง ูพุงฺฉ ฺฉูุฏ.

```js
useEffect(() => {
  const id = setInterval(tick, 1000);
  return () => clearInterval(id); // cleanup
}, []);
```

- ุญูููโ ุจโุงูุชูุง (Infinite Loop)

  - **ูุดฺฉู:** ุฏุงุฎู ุงุซุฑ `setState` ุตุฏุง ุฒุฏูโุง ู ููุงู state ูู ุฏุฑ `deps` ูุฌูุฏ ุฏุงุฑุฏ โ ูุฑ ุชุบุฑ state ุฏูุจุงุฑู effect ุฑุง ุงุฌุฑุง ูโฺฉูุฏ โ ูููพ ุจโููุงุช.

    - ูุงุจุณุชฺฏ ุฑุง ุญุฐู ูฺฉู! ุงู ููุท ูุดฺฉู ุฑุง ูพููุงู ูโฺฉูุฏ.
    - ุจูโุฌุง ุขูุ **ูุนูุงุฑ ฺฉุฏ** ุฑุง ุชุบุฑ ุจุฏู ุง ฺฉ **ุดุฑุท/guard** ุจฺฏุฐุงุฑ ุชุง ููุท ุฏุฑ ุดุฑุงุท ุฎุงุต state ุฑุง ุชุบุฑ ุฏูุฏ.

- ุจุณุชูโ ฺฉููู (Stale Closure)

  - **ูุดฺฉู:** ุงุซุฑ ุจู state ุง props ูุฏู ุฏุณุชุฑุณ ุฏุงุฑุฏ (ุจูโุฏูู ุงูฺฉู ุฏุฑ ุฒูุงู ุชุนุฑู ุงุซุฑุ ุขู ููุงุฏุฑ ฺฏุฑูุชู ุดุฏูโุงูุฏ).

    - ุขุฑุงูโ ูุงุจุณุชฺฏโูุง ุฑุง ฺฉุงูู ฺฉู ุชุง ููุดู ููุงุฏุฑ ุชุงุฒู ุจุงูุฏ.
    - ุงฺฏุฑ ููุท ุจู ุขุฎุฑู ููุฏุงุฑ ูุงุฒ ุฏุงุฑุ ุขู ุฑุง ุฏุฑ `useRef` ูฺฏู ุฏุงุฑ.
    - ุจุฑุง ุจูโุฑูุฒุฑุณุงู state ุจุฑ ุงุณุงุณ ููุฏุงุฑ ูุจูุ ุงุฒ ูุฑู **ุชุงุจุน** `setState` ุงุณุชูุงุฏู ฺฉู:

```js
setCount((prev) => prev + 1);
```

---

### ฑ.ถ `useLayoutEffect`

**ุจู ุตูุฑุช ููุฒูุงู** ูพุณ ุงุฒ ุชุบุฑุงุช DOM ุงูุง **ูุจู ุงุฒ** ููุงุด ูุฑูุฑฺฏุฑ ุงุฌุฑุง ูโุดูุฏ.

**ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู**

- ุงูุฏุงุฒูโฺฏุฑ layout (ูุซู ุงูุฏุงุฒู ุนูุตุฑ) **ูุจู ุงุฒ** ุงูฺฉู ฺฉุงุฑุจุฑ ููฺฉุฑ ุจุจูุฏ.

**ูุซุงู โ ุงูุฏุงุฒูโฺฏุฑ ุงุฑุชูุงุน**

```tsx
const boxRef = useRef<HTMLDivElement>(null);
const [height, setHeight] = useState(0);

useLayoutEffect(() => {
  if (boxRef.current) {
    setHeight(boxRef.current.getBoundingClientRect().height);
  }
}, []);
```

**ุชูุฑู โ ูุฏุฑ ฺุณุจุงู**

> ุงุฑุชูุงุน ฺฉ ูุฏุฑ ุฑุง ุงูุฏุงุฒูโฺฏุฑ ฺฉูุฏ ู ุขู ููุฏุงุฑ ุฑุง ุจู ุนููุงู padding ุจุงูุง ุจู ูุญุชูุง ุงุตู ุงุถุงูู ฺฉูุฏ ุชุง ูุฑฺฏุฒ ูพุดุช ูุฏุฑ ูพููุงู ูุดูุฏ.

---

### ฑ.ท `useInsertionEffect`

```ts
useInsertionEffect(effect, deps?);
```

**ูุฏู**

ุงุณุชุงูโูุง ุจุญุฑุงู ุฑุง **ูุจู ุงุฒ** layout ู ููุงุด ุชุฒุฑู ฺฉูุฏุ ุงุฒ FOUC (ููุด ูุญุชูุง ุจุฏูู ุงุณุชุงู) ุฌููฺฏุฑ ฺฉูุฏ.

**ูุซุงู โ CSS ูพูุง**

```tsx
useInsertionEffect(() => {
  const styleTag = document.createElement("style");
  styleTag.textContent = ".brand { color: tomato; }";
  document.head.append(styleTag);
  return () => styleTag.remove();
}, []);
```

**ุชูุฑู**

> ฺฉุงููพูููุช ุงุฌุงุฏ ฺฉูุฏ ฺฉู ฺฉ ุฑูฺฏ accent ุชุตุงุฏู ุฏุฑ mount ุงูุชุฎุงุจ ฺฉูุฏ ู ูุงุนุฏูโุง ูุซู `.accent { color: <color>; }` ุชุฒุฑู ฺฉูุฏ.

---

### ฑ.ธ `useCallback` & ฑ.น `useMemo`

- `useCallback(fn, deps)` ฺฉ **ุชุงุจุน memoized** ุจุฑูโฺฏุฑุฏุงูุฏ.
- `useMemo(factory, deps)` ฺฉ **ููุฏุงุฑ memoized** ุจุฑูโฺฏุฑุฏุงูุฏ.

**ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู**

- ุฌููฺฏุฑ ุงุฒ ูุญุงุณุจุงุช / ุจุงุฒุณุงุฒโูุง ฺฏุฑุงูโููุช ฺฉู ุจุงุนุซ re-render ูุฑุฒูุฏุงู ูโุดููุฏ.

**ูุซุงู โ handlers ูพุงุฏุงุฑ**

```tsx
const addTodo = useCallback((text: string) => {
  setTodos((t) => [...t, { id: crypto.randomUUID(), text }]);
}, []);
```

**ุจูุชุฑู ุดููโูุง**

- ูพุณ ุงุฒ ุชุฃุฏ ูุดฺฉูุงุช ุนููฺฉุฑุฏ ุจู ุณุฑุงุบ ุขูโูุง ุจุฑูุฏ.
- ุขุฑุงูโูุง ูุงุจุณุชฺฏ ุฑุง ุจุง ุจุงูุง ุจุฑุฏู ููุงุฏุฑ ูพุงุฏุงุฑ ฺฉูฺฺฉ ูฺฏู ุฏุงุฑุฏ.

**ุชูุฑู โ ููุงุดโุฏููุฏู ูุจููุงฺ**

> ุนุฏุฏ ูุจููุงฺ `n` ุฑุง ูุดุงู ุฏูุฏ ฺฉู `n` ุงุฒ ฺฉ ูุฑูุฏ ูโุขุฏ. ูุญุงุณุจู ุฑุง memoize ฺฉูุฏ ุชุง ููุท ููุช `n` ุชุบุฑ ูโฺฉูุฏ ุงุฌุฑุง ุดูุฏ.

---

### ฑ.ฑฐ `useImperativeHandle`

```ts
useImperativeHandle(ref, createHandle, deps?);
```

**ูุฏู**

ฺฉ ุฒุฑูุฌููุนู ฺฉูุชุฑู ุดุฏู ุงุฒ ูุชุฏูุง imperative ุฑุง ุจุฑุง ฺฉุงููพูููุชโูุง ูุงูุฏ ุขุดฺฉุงุฑ ฺฉูุฏ.

**ูุซุงู โ API ูุฑูุฏ ุณูุงุฑุด**

```tsx
const FancyInput = forwardRef<HTMLInputElement, Props>((props, ref) => {
  const innerRef = useRef<HTMLInputElement>(null);
  useImperativeHandle(ref, () => ({
    focus: () => innerRef.current?.focus(),
    clear: () => innerRef.current && (innerRef.current.value = ""),
  }));
  return <input ref={innerRef} {...props} />;
});
```

**ุชูุฑู**

> ฺฉุงููพูููุช `Stopwatch` ุจุง ูุชุฏูุง `start()`ุ `stop()`ุ `reset()` ุจุณุงุฒุฏ ฺฉู ุงุฒ ุทุฑู `useImperativeHandle` ุขุดฺฉุงุฑ ูโุดููุฏ.

---

### ฑ.ฑฑ `useDebugValue`

ุจุฑฺุณุจโูุง ูุงุจู ูุดุงูุฏู ุฏุฑ React DevTools ุงุถุงูู ฺฉูุฏ.

```ts
useDebugValue(value, formatFn?);
```

ูุซุงู:

```ts
useDebugValue(user, (u) => `ฺฉุงุฑุจุฑ: ${u.name}`);
```

---

## ฒ. ููฺฉโูุง ุงุถุงู

### ฒ.ฑ `useId`

ID ูุง ููุญุตุฑ ุจู ูุฑุฏ ุชููุฏ ฺฉูุฏ ฺฉู ุจู ุณุฑูุฑ ู ฺฉูุงูุช ูุทุงุจูุช ุฏุงุฑูุฏ.

```ts
const id = useId();
<label htmlFor={id}>ูุงู</label>
<input id={id} />
```

### ฒ.ฒ `useSyncExternalStore`

ุฏุฑ ฺฉ store ุฎุงุฑุฌ ุจุง ุณุงุฒฺฏุงุฑ ุฏุฑ ุทูู ุฑูุฏุฑ ููุฒูุงู ุงุดุชุฑุงฺฉ ฺฉูุฏ.

```tsx
const time = useSyncExternalStore(subscribe, getSnapshot);
```

### ฒ.ณ `useDeferredValue`

ฺฉ ููุฏุงุฑ ุบุฑุถุฑูุฑ ุฑุง ุชุง ุฒูุงู ฺฉู ูุฑูุฑฺฏุฑ ุจฺฉุงุฑ ุงุณุชุ ุจู ุชุนูู ุจูุฏุงุฒุฏ.

```tsx
const deferred = useDeferredValue(value);
```

**ุชูุฑู โ ููุชุฑ ูุณุช**

> ุฌุณุชุฌู ุฌุณุชุฌู ุฑุง ุจู ุชุนูู ุจูุฏุงุฒุฏ ุชุง UI ูุณุช ุจุฑุง ูุฑูุฏโูุง ุทููุงู ูพุงุณุฎฺฏู ุจูุงูุฏ.

### ฒ.ด `useTransition`

ฺฉ transition ฺฉูโุงูููุช ุดุฑูุน ฺฉูุฏ.

```ts
const [isPending, startTransition] = useTransition();
```

ูุซุงู โ ุฌุณุชุฌู type-ahead ฺฉู UI ุฑุง ููู ููโฺฉูุฏ.

---

## ณ. ุฌุฏุฏ ุฏุฑ React ฑน

React ฑน ุจุฑ **ูุฑูโูุง** ู **ุชุบุฑุงุช ุฏุงุฏู** ุชูุฑฺฉุฒ ุฏุงุฑุฏุ ุณู ููฺฉ ุฌุฏุฏ ุจู ุนูุงูู ุชุงุจุน ุฌุฏุฏ `use()` ุฑุง ูุนุฑู ูโฺฉูุฏ.

### ณ.ฑ `useOptimistic`

UI ุฑุง **ูุจู ุงุฒ** ุชุฃุฏ ุณุฑูุฑ ุจูโุทูุฑ ุฎูุดโุจูุงูู ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

```tsx
const [optimisticTodos, addOptimisticTodo] = useOptimistic<Todo[], Todo>(
  todos,
  (state, newTodo) => [...state, { ...newTodo, optimistic: true }]
);

async function handleAdd(text: string) {
  addOptimisticTodo({ id: "temp", text });
  await saveTodo(text);
}
```

**ุชูุฑู โ ูุฑูุฏ ฺุช**

> ูพุงูโูุง ุฑุง ููุฑุงู ุจุง ุจุฑฺุณุจ _ุฎูุดโุจูุงูู_ ูุดุงู ุฏูุฏุ ุณูพุณ ูพุณ ุงุฒ ุฐุฎุฑู ุฌุงฺฏุฒู ฺฉูุฏ.

### ณ.ฒ `useActionState`

ูุฑู `action` ูุง ุฑุง ูุฏุฑุช ฺฉูุฏ ู ุญุงูุช ฺฉุงููพูููุช ุฑุง ุจุง ูุชุฌู ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

```tsx
const [error, formAction, pending] = useActionState(async (prev, formData) => {
  try {
    await submit(formData);
    return null; // ุฎุทุง ูุณุช
  } catch (e) {
    return (e as Error).message;
  }
}, null);

<form action={formAction}>{/* ูุฑูุฏโูุง */}</form>;
```

**ุชูุฑู โ ุชุบุฑ ูุงู ูพุฑููุงู**

> ูุฑู ุชุบุฑ ูุงู ูพุฑููุงู ุจุณุงุฒุฏ ฺฉู ุฎุทุงูุง ุณูุช ุณุฑูุฑ ุฑุง ุงุฒ ุทุฑู `error` ฺฏุฒุงุฑุด ุฏูุฏ.

### ณ.ณ `useFormStatus`

ูุถุนุช ูุฒุฏฺฉโุชุฑู `<form>` ูุงูุฏ ุฑุง ุจุฎูุงูุฏ.

```tsx
const { pending } = useFormStatus();
<button disabled={pending}>ุฐุฎุฑู</button>;
```

**ุชูุฑู โ ุบุฑูุนุงู ุฏุฑ submit**

> ุฏุฑ ูุฑู ุชุบุฑ ูุงู ุจุงูุงุ ุฏฺฉูู submit ุฑุง ุฏุฑ ุญุงู ฺฉู `pending` true ุงุณุช ุบุฑูุนุงู ฺฉูุฏ.

### ณ.ด `use()`

ุงฺฏุฑฺู ุงุฒ ูุธุฑ ูู ฺฉ ููฺฉ ูุณุชุ `use()` ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ _await_ promise ูุง ุฑุง ุฏุฑูู ฺฉ ฺฉุงููพูููุช ุฏุฑ ุทูู ุฑูุฏุฑ ุงูุฌุงู ุฏูุฏ.

```tsx
function User({ id }: { id: string }) {
  const user = use(fetch(`/api/users/${id}`).then((r) => r.json()));
  return <span>{user.name}</span>;
}
```

**ูุดุฏุงุฑูุง**

- ููุท ุฏุฑ **Server Components** ุง ุจุง ฺฉุงููพุงูุฑ React ูพุดุชุจุงู ูโุดูุฏ.
- ฺฉ promise ุฒุฑ ููุฏ ูพุฑุชุงุจ ูโฺฉูุฏ โ ุจู ูุฑุฒูุง Suspense ุชฺฉู ฺฉูุฏ.

---

## ด. ูุงฺูโูุงูู ู ููุงุจุน ุจุดุชุฑ

- [ูพุณุช ุงูุชุดุงุฑ React ฑน](https://react.dev/blog/2024/12/05/react-19)
- [ูุฑุฌุน ุฑุณู API ููฺฉโูุง](https://react.dev/reference/react)
- [Kent C. Dodds โ Epic React](https://epicreact.dev/) โ ุบูุฑ ุนูู ู ุชูุฑูุงุช
- [React Docs โ ูุฑูโูุง ู Actions](https://react.dev/learn/forms)
