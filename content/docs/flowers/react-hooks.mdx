---
title: ฺฉุชุงุจ ุขุดูพุฒ ููฺฉโูุง React 19
description: ูุฑุฌุน ุนูู ู ูุซุงูโูุญูุฑ ุจุฑุง ุชูุงู ููฺฉโูุง ุฑุณู React 19 ุจุง ุจูุชุฑู ุดููโูุง ู ุชูุฑูุงุช ุนูู.
---

# ููฺฉโูุง React 19

> **ููฺฉโูุง ฺุณุชูุฏุ** ููฺฉโูุง ููุท ุชูุงุจุน JavaScript ูุณุชูุฏ ฺฉู ูุงูุดุงู ุจุง `use*` ุดุฑูุน ูโุดูุฏ. ุขูโูุง ุจู ุดูุง ุงุฌุงุฒู ูโุฏููุฏ ุชุง ุจู ูฺฺฏโูุง React ุงุฒ ฺฉุงููพูููุชโูุง ุชุงุจุน "ูุชุตู ุดูุฏ".

---

## ฑ. ููฺฉโูุง ุจูุงุฏ

ุงู ููฺฉโูุง ุจุดุชุฑ ูุงุฒูุง ุฑูุฒุงูู ุฑุง ูพูุดุด ูโุฏููุฏ.

### ฑ.ฑ `useState`

ุชุตูุฑ ฺฉูุฏ ฺฉุงููพูููุช ุดูุง ฺฉ **ฺฉูุฒู ูพุณโุงูุฏุงุฒ** ๐ท ุงุณุช ฺฉู ฺฉ ุนุฏุฏ ุฑุง ุฏุฑูู ุฎูุฏ ูฺฏู ูโุฏุงุฑุฏ.
`useState` ุจู ุดูุง **ุฏู ฺุฒ** ูโุฏูุฏ:

ฑ. **ุนุฏุฏ ูุนู** ุฏุฑ ฺฉูุฒู ูพุณโุงูุฏุงุฒ (`count`).
ฒ. ฺฉ **ุฑุจุงุช ุฏูุณุชุงูู** ุจู ูุงู `setCount` ฺฉู ูโุชูุงูุฏ ุขู ุนุฏุฏ ุฑุง ุชุบุฑ ุฏูุฏ.

ุฏู ุฑุงู ุจุฑุง ฺฏูุชู ุจู ุฑุจุงุช ฺฉู ฺู ฺฉุงุฑ ุงูุฌุงู ุฏูุฏ:

| ุฑุงู                  | ุขูฺู ูโฺฏูุฏ          | ูุนูุง ุขู                                                                                               |
| -------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------ |
| **ููุฏุงุฑ ูุณุชูู**     | `setCount(count + 1)`  | "ู ุฑุจุงุชุ ุงู ุนุฏุฏ ุฏูู ุฑุง ุฏุฑ ฺฉูุฒู ูพุณโุงูุฏุงุฒ ุจููุณ."                                                     |
| **ุชุงุจุน ุจูโุฑูุฒุฑุณุงู** | `setCount(c => c + 1)` | "ู ุฑุจุงุชุ ููุช ฺฉูุฒู ูพุณโุงูุฏุงุฒ ุฑุง ูโฺฏุฑุ ฑ ุฑุง ุจู ูุฑ ุนุฏุฏ ฺฉู ุฏุฑ ุขูุฌุง **ุฏุฑุณุช ุฏุฑ ุขู ูุญุธู** ุงุณุช ุงุถุงูู ฺฉู." |

ฺุฑุง ุฑุงู ุฏูู ุงููโุชุฑ ุงุณุช:

- **ุฑุจุงุช ุงุฒ ุตู ฺฉุงุฑ ูโฺฉูุฏ.** ุงฺฏุฑ ุดูุง ุฏุณุชูุฑุงุช ุฑุง ุฏู ุจุงุฑ ุฎู ุณุฑุน ูุฑุงุฏ ุจุฒูุฏุ ูุฑ ุฏู ุฏุณุชูุฑ ููุฏุงุฑ ูุณุชูู ููฺฉู ุงุณุช ุจุฑ ุงุณุงุณ ููุงู ุนุฏุฏ ุดุฑูุน ุจุงุดูุฏ. ูุฑู ุจูโุฑูุฒุฑุณุงู ุจุงุนุซ ูโุดูุฏ ุฑุจุงุช ูุฑ ุจุงุฑ ฺฉูุฒู ูพุณโุงูุฏุงุฒ ุฑุง ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉูุฏ.
- **React ฺฏุงู ููุชุธุฑ ูโูุงูุฏ** (ุขู ุฑุง "ุฏุณุชูโุจูุฏ" ูโฺฉูุฏ) ูุจู ุงุฒ ุงูฺฉู ุจู ุฑุจุงุช ุงุฌุงุฒู ฺฉุงุฑ ุฏูุฏ. ุฏุฑ ุทูู ุขู ุงูุชุธุงุฑุ ุนุฏุฏ ูโุชูุงูุฏ ุชุบุฑ ฺฉูุฏ. ูุฑู ุจูโุฑูุฒุฑุณุงู ุชุถูู ูโฺฉูุฏ ฺฉู ุดูุง ุขู ุชุบุฑุงุช ุฑุง ุงุฒ ุฏุณุช ูุฏูุฏ.

> **ูุงุนุฏู ฺฉู:**
> ูุฑ ุฒูุงู ฺฉู **ููุฏุงุฑ ุฌุฏุฏ ุจู ููุฏุงุฑ ูุฏู ุจุณุชฺฏ ุฏุงุฑุฏ**ุ ุงุฒ ูุฑู ุจูโุฑูุฒุฑุณุงู ุงุณุชูุงุฏู ฺฉูุฏ.

---

ูุซุงู ฺฉูฺฺฉ: ฺฉ ุฏฺฉูู **ฺฉูฺฉ ุฏูุจู**:

```tsx
import { useState } from "react";

export default function DoubleClick() {
  const [count, setCount] = useState(0); // ฐ ููุฏุงุฑ ุงููู ูุง ุงุณุช

  const handleClick = () => {
    // ูุง ูโุฎูุงูู ูุฑ ฺฉูฺฉ +ฒ ุจุงุดุฏ
    setCount((c) => c + 1);
    setCount((c) => c + 1);
  };

  return <button onClick={handleClick}>ุดูุง {count} ุจุงุฑ ฺฉูฺฉ ฺฉุฑุฏุฏ</button>;
}
```

- ฺฉ ุจุงุฑ ฺฉูฺฉ ฺฉูุฏ โ **ฒ**
- ุฏูุจุงุฑู ฺฉูฺฉ ฺฉูุฏ โ **ด**
  ุงฺฏุฑ ูุง ุงุฒ `setCount(count + 1)` ุฏู ุจุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏู ุจูุฏูุ ููุท **ฑ โ ฒ โ ณ โฆ** ูโฺฏุฑูุชู (ฺูู ูุฑ ุฏู ูุฑุงุฎูุงู ุงุฒ ููุงู `count` ูุฏู ุงุณุชูุงุฏู ูโฺฉููุฏ).

---

ุงู ฺฉ ูุซุงู ุจุฑุง ูุฑูุฏโูุง ฺฉูุชุฑู ุดุฏู ุจุง useState ุงุณุช:

```tsx
const [query, setQuery] = useState<string>(""); // ุงฺฏุฑ undefined ุฑุง ุจู ุนููุงู ููุฏุงุฑ ุงููู ุชูุธู ฺฉูู ฺู ุงุชูุงู ูโุงูุชุฏุ

<input
  className="border p-1 rounded-sm"
  type="text"
  onChange={(e) => {
    setQuery(e.target.value.replace(/koala/gi, "๐จ"));
  }}
/>;
```

---

ุฑุงูููุง ุจูุชุฑู ุดููโูุง:

ฑ. **ุญุงูุช ุฑุง ฺฉูฺฺฉ ูฺฏู ุฏุงุฑุฏ.** ููุท ุขูฺู ุฑุง ฺฉู ููโุชูุงูุฏ ูุญุงุณุจู ฺฉูุฏ ุฐุฎุฑู ฺฉูุฏ.
ฒ. **ุงุฒ ูุฑู ุชุงุจุน (ุจูโุฑูุฒุฑุณุงู) ุงุณุชูุงุฏู ฺฉูุฏ** ููุช ููุฏุงุฑ ุฌุฏุฏ ุจู ููุฏุงุฑ ูุฏู ุจุณุชฺฏ ุฏุงุฑุฏ.
ณ. **ุจูโุฑูุฒุฑุณุงูโูุง ูุฑุชุจุท ุฑุง ฺฏุฑููโุจูุฏ ฺฉูุฏ** ุฏุฑ ฺฉ ูุฑุงุฎูุงู:

```tsx
setUser((u) => ({ ...u, age: u.age + 1 }));
```

ด. **ุจูุงูุงุตูู ูพุณ ุงุฒ ูุฑุงุฎูุงู `setX` ุญุงูุช ุฑุง ูุฎูุงูุฏ.** ูููุฒ ุจูโุฑูุฒุฑุณุงู ูุดุฏู ุงุณุช.
ต. **ุจุฑุง ุญุงูุช ุจุณุงุฑ ูพฺุฏู** (ุชุนุฏุงุฏ ุฒุงุฏ ููุฏ)ุ `useReducer` ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ.

---

ุชูุฑู ุฎุงูฺฏ ๐

ฑ. **ุดูุงุฑูุฏู ุชฺฉโูุฑุญููโุง**

- `Stepper.tsx` ุฑุง ุจุณุงุฒุฏ.
- ุงุฒ **ฐ** ุดุฑูุน ฺฉูุฏ.
- ุฏฺฉููโูุง **+ฑ**ุ **โฑ**ุ ู **ุจุงุฒูุดุงู** ุฑุง ุงุถุงูู ฺฉูุฏ.
- ุงุฒ ูุฑู ุจูโุฑูุฒุฑุณุงู ุจุฑุง +ฑ ู โฑ ุงุณุชูุงุฏู ฺฉูุฏ.

ฒ. **ุดูุงุฑูุฏู ูุงุดู ุฒูุงู**

- ุฏฺฉูู ุฏฺฏุฑ **"+ต"** ุงุถุงูู ฺฉูุฏ ฺฉู ูพูุฌ ุจุงุฑ ุจุง ูุฑู ุจูโุฑูุฒุฑุณุงู ุญููู ูโุฒูุฏ

  ```tsx
  for (let i = 0; i < 5; i++) {
    setCount((c) => c + 1);
  }
  ```

- ุซุงุจุช ฺฉูุฏ ฺฉู ูุฑ ฺฉูฺฉ ต ูุงุญุฏ ูโูพุฑุฏ.

ณ. **ุขู ุฑุง ุจุฑุง ฺฉ ุฏูุณุช ุชูุถุญ ุฏูุฏ** (ุง ุงุฑุฏฺฉ ูุงุณุชฺฉ ๐ฆ)

- ุฏุฑ ฺฉ ูพุงุฑุงฺฏุฑุงู ฺฉูุชุงูุ ุชูุถุญ ุฏูุฏ ฺฉู **ฺุฑุง** `setCount(c => c + 1)` ุงุฒ `setCount(count + 1)` ุงููโุชุฑ ุงุณุช.
- ุงฺฏุฑ ุขูโูุง ุจุชูุงููุฏ ุขู ุฑุง ุชฺฉุฑุงุฑ ฺฉููุฏุ ุดูุง ููููู ุฑุง ุชุณูุท ุงูุชูโุงุฏ!

ฺฉุฏฺฏุฐุงุฑ ุดุงุฏ โ ู ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ: **ุจู ุฑุจุงุช ุจฺฏูุฏ _ฺฺฏููู_ ููุฏุงุฑ ุฑุง ุชุบุฑ ุฏูุฏุ ูู _ฺู_ ููุฏุงุฑ ุจููุณุฏ.**

- [ุงููู ูพุฑูฺู ุฏุฑ ฺฉูุงุณ - ฺฉุชุงุจุฎุงูู ูู](/docs/projects/hooks/use-state/first)
- [ุฏููู ูพุฑูฺู ุฏุฑ ฺฉูุงุณ - ูุณุช ุญูุงูุงุช ุฎุงูฺฏ](/docs/projects/hooks/use-state/second)

---

ุฏุฑ ุงูุฌุง ฺฉ **ุฑุงูููุง ุขููุฒุด ฺฏุงู ุจู ฺฏุงู** ุจุฑุง `useReducer` ุฏุฑ React ูุฌูุฏ ุฏุงุฑุฏุ ููุดุชู ุดุฏู ุจู ฺฏูููโุง ฺฉู ฺฏู ูู ฺฉ ูุจุชุฏ ุฑุง ุงุฒ ุฏุงูุด ุตูุฑ ุขููุฒุด ูโุฏูู โ ุจุง ุชูุถุญ ูุงุถุญุ ุจูุชุฑู ุดููโูุงุ ูุซุงูโูุง ุฏูุง ูุงูุน (ูุจุชุฏุ ูุชูุณุทุ ูพุดุฑูุชู)ุ ู ฺฉ ุชูุฑู ุฎุงูฺฏ ุฏุฑ ูพุงุงู.

---

### ฑ.ฒ `useReducer`

#### ฑ.ฒ.ฑ useReducer ฺุณุชุ

ููุช ุญุงูุช ฺฉุงููพูููุช ุดูุง **ุจุฑุง `useState` ุฎู ูพฺุฏู ูโุดูุฏ**ุ ุดูุง ุจู ฺุฒ ุจูุชุฑ ุจุฑุง ุณุงุฒูุงูุฏู ููุทู ุฎูุฏ ูุงุฒ ุฏุงุฑุฏ.

โ `useReducer` ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ **ุงูุชูุงูุงุช ุญุงูุช ูุงุจู ูพุดโุจู** ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุชุงุจุน reducer ุจููุณุฏ.
โ ุดูุง ฺฉ "action" ุฑุง "dispatch" ูโฺฉูุฏุ ู reducer ุญุงูุช ุฌุฏุฏ ุฑุง ูุญุงุณุจู ูโฺฉูุฏ.
โ ุงู ุจุณุงุฑ ุดุจู Redux ุงุณุชุ ุงูุง ุฏุฑ React ุณุงุฎุชู ุดุฏู ุงุณุช.

---

#### ฑ.ฒ.ฒ ูุญู

```tsx
const [state, dispatch] = useReducer(reducer, initialArg, init?);
```

| ุงุตุทูุงุญ       | ูุนู                                      |
| ------------ | ----------------------------------------- |
| `state`      | ุญุงูุช ูุนู                                 |
| `dispatch`   | ุชุงุจุน ฺฉู ุจุฑุง ุดุฑูุน ุชุบุฑ ูุฑุงุฎูุงู ูโฺฉูุฏ |
| `reducer`    | ุชุงุจุน ุฎุงูุต ฺฉู ุญุงูุช ุจุนุฏ ุฑุง ุชุตูู ูโฺฏุฑุฏ  |
| `initialArg` | ุญุงูุช ุงููู                                |
| `init`       | ููุฏุงุฑุฏู ุงููู ุชูุจู ุงุฎุชุงุฑ               |

---

#### ฑ.ฒ.ณ ฺู ุฒูุงู ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉููุ

- ููุช **ููุทู ุญุงูุช ูพฺุฏู** ุฏุงุฑุฏุ ูุซูุงู ฺฉ ุดุก ุง ฺูุฏู ููุฏุงุฑ.
- ููุช **ุญุงูุช ุจุนุฏ ุจู ุญุงูุช ูุจู ุจุณุชฺฏ ุฏุงุฑุฏ**.
- ููุช ูโุฎูุงูุฏ **ุจูโุฑูุฒุฑุณุงูโูุง ุญุงูุช ุฑุง ูุชูุฑฺฉุฒ ฺฉูุฏ**ุ ูุซู ฺฉ Redux ฺฉูฺฺฉ.

---

#### ฑ.ฒ.ด ูุซุงู ูุจุชุฏ โ ุดูุงุฑูุฏู

ุงู ฺฉูุงุณฺฉโุชุฑู ู ุณุงุฏูโุชุฑู ูุซุงู ุงุณุช.

```tsx
type Action = { type: "inc" } | { type: "dec" } | { type: "reset" };

function reducer(state: number, action: Action) {
  switch (action.type) {
    case "inc":
      return state + 1;
    case "dec":
      return state - 1;
    case "reset":
      return 0;
    default:
      return state;
  }
}

function Counter() {
  const [count, dispatch] = useReducer(reducer, 0);

  return (
    <>
      <p>{count}</p>
      <button onClick={() => dispatch({ type: "inc" })}>+</button>
      <button onClick={() => dispatch({ type: "dec" })}>โ</button>
      <button onClick={() => dispatch({ type: "reset" })}>ุจุงุฒูุดุงู</button>
    </>
  );
}
```

๐ ุงุฏุฏุงุดุชโูุง:

- `reducer` ฺฉ **ุชุงุจุน ุฎุงูุต** ุงุณุช โ ุญุงูุช `state` ู `action` ุฑุง ูโฺฏุฑุฏ โ **ุญุงูุช ุฌุฏุฏ** ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
- `dispatch` ฺฉ action ุฑุง ุงุฑุณุงู ูโฺฉูุฏ.

---

#### ฑ.ฒ.ต ุจูุชุฑู ุดููโูุง

โ reducer ุฑุง **ุฎุงูุต** ูฺฏู ุฏุงุฑุฏ โ ูฺ ูุฑุงุฎูุงู APIุ ุชุงูุฑุ ุง ุงุซุฑ ุฌุงูุจ.
โ ููุดู **ุชูุงู action ูุง** ุฑุง ูุฏุฑุช ฺฉูุฏ.
โ reducer ุฑุง ุจุง ฺฉุงููพูููุช ููโูฺฉุงู ฺฉูุฏ ูฺฏุฑ ุงูฺฉู ูุดุชุฑฺฉ ุจุงุดุฏ.
โ ุงุฒ TypeScript ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ูุฏุฑุช ุฌุงูุน action ุชุถูู ุดูุฏ.
โ ุญุงูุช ุฑุง ุชุบุฑ ูุฏูุฏ โ ููุดู ฺฉ **ฺฉูพ ุฌุฏุฏ** ุจุฑฺฏุฑุฏุงูุฏ.

---

#### ฑ.ฒ.ถ ูุซุงูโูุง ุฏูุง ูุงูุน

- **ูุจุชุฏ** โ `ุชุบุฑ ุชู\*\*

```tsx
type ThemeAction = { type: "light" } | { type: "dark" };

function themeReducer(state: "light" | "dark", action: ThemeAction) {
  switch (action.type) {
    case "light":
      return "light";
    case "dark":
      return "dark";
    default:
      return state;
  }
}

function ThemeToggle() {
  const [theme, dispatch] = useReducer(themeReducer, "light");

  return (
    <div>
      <p>ุชู ูุนู: {theme}</p>
      <button onClick={() => dispatch({ type: "light" })}>ุฑูุดู</button>
      <button onClick={() => dispatch({ type: "dark" })}>ุชุงุฑฺฉ</button>
    </div>
  );
}
```

---

- **ูุชูุณุท** โ `ุญุงูุช ูุฑู`

ูุฑุถ ฺฉูุฏ ุดูุง ฺฉ ูุฑู ุจุง ฺูุฏู ููุฏ ุฑุง ูุฏุฑุช ูโฺฉูุฏ:

```tsx
type FormState = { name: string; email: string };
type FormAction =
  | { type: "setName"; payload: string }
  | { type: "setEmail"; payload: string }
  | { type: "reset" };

function formReducer(state: FormState, action: FormAction): FormState {
  switch (action.type) {
    case "setName":
      return { ...state, name: action.payload };
    case "setEmail":
      return { ...state, email: action.payload };
    case "reset":
      return { name: "", email: "" };
    default:
      return state;
  }
}

function MyForm() {
  const [state, dispatch] = useReducer(formReducer, {
    name: "",
    email: "",
  });

  return (
    <form>
      <input
        value={state.name}
        onChange={(e) => dispatch({ type: "setName", payload: e.target.value })}
        placeholder="ูุงู"
      />
      <input
        value={state.email}
        onChange={(e) =>
          dispatch({ type: "setEmail", payload: e.target.value })
        }
        placeholder="ุงูู"
      />
      <button type="button" onClick={() => dispatch({ type: "reset" })}>
        ุจุงุฒูุดุงู
      </button>
    </form>
  );
}
```

---

- **ูพุดุฑูุชู** โ `ุณุจุฏ ุฎุฑุฏ`

ฺฉ ุณุจุฏ ุฎุฑุฏ ุชุฌุงุฑุช ุงูฺฉุชุฑููฺฉ ุฑุง ุชุตูุฑ ฺฉูุฏ ฺฉู ูโุชูุงูุฏ ููุงุฑุฏ ุฑุง ุงุถุงููุ ุญุฐูุ ุง ูพุงฺฉ ฺฉูุฏ.

```tsx
type Item = { id: number; name: string };
type CartAction =
  | { type: "add"; item: Item }
  | { type: "remove"; id: number }
  | { type: "clear" };

function cartReducer(state: Item[], action: CartAction): Item[] {
  switch (action.type) {
    case "add":
      return [...state, action.item];
    case "remove":
      return state.filter((item) => item.id !== action.id);
    case "clear":
      return [];
    default:
      return state;
  }
}

function Cart() {
  const [cart, dispatch] = useReducer(cartReducer, []);

  return (
    <div>
      <button
        onClick={() =>
          dispatch({ type: "add", item: { id: Date.now(), name: "ุณุจ" } })
        }
      >
        ุงุถุงูู ฺฉุฑุฏู ุณุจ
      </button>
      <button onClick={() => dispatch({ type: "clear" })}>ูพุงฺฉ ฺฉุฑุฏู</button>
      <ul>
        {cart.map((item) => (
          <li key={item.id}>
            {item.name}{" "}
            <button onClick={() => dispatch({ type: "remove", id: item.id })}>
              ุญุฐู
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

---

#### ฑ.ฒ.ท ุชูุฑู ุฎุงูฺฏ

ุฏุฑ ุงูุฌุง ุจุฑุฎ ุชูุฑูุงุช ุฏูุง ูุงูุน ุจุฑุง ุชูุฑู ุดูุง ูุฌูุฏ ุฏุงุฑุฏ.

- ูุจุชุฏ

  โ ฺฉ **ุชุบุฑ ุชู** ุจุง `light | dark | system` ุจุง ุงุณุชูุงุฏู ุงุฒ `useReducer` ุจุณุงุฒุฏ.
  โ ณ ุฏฺฉูู ุจุฑุง ุชุบุฑ ุจู ุงู ุญุงูุชโูุง ุฑูุฏุฑ ฺฉูุฏ.

- ูุชูุณุท

  โ ฺฉ **ูุฑู ฺูุฏูุฑุญููโุง** ุจุณุงุฒุฏ (ูุซู ุซุจุชโูุงู ฺูุฏูุฑุญููโุง).

  โ ุงุฒ `useReducer` ุจุฑุง ูพฺฏุฑ ุงูฺฉู ฺฉุงุฑุจุฑ ุฏุฑ ฺฉุฏุงู ูุฑุญูู ุงุณุชุ ู ุฏุงุฏูโูุง ูุฑู ุงุณุชูุงุฏู ฺฉูุฏ.

- ูพุดุฑูุชู

  โ ฺฉ **ุงูพูฺฉุดู ูุณุช ฺฉุงุฑูุง** ุจุณุงุฒุฏ:

      - ุงุถุงูู ฺฉุฑุฏู ฺฉ ฺฉุงุฑ
      - ุชุบุฑ ูุถุนุช ุชฺฉูู ุดุฏู
      - ุญุฐู ฺฉ ฺฉุงุฑ
      - ูพุงฺฉ ฺฉุฑุฏู ููู ุชฺฉูู ุดุฏูโูุง

ุงุฒ `useReducer` ุจุฑุง ูุฏุฑุช ุญุงูุช ุงุณุชูุงุฏู ฺฉูุฏ.

---

#### ฑ.ฒ.ธ ุฎูุงุตู

- `useReducer` ูุซู ฺฉ Redux ฺฉูฺฺฉ ุจุฑุง ฺฉ ฺฉุงููพูููุช ูุงุญุฏ ุงุณุช.
- ุนุงู ุจุฑุง **ุญุงูุช ูพฺุฏู ุง ูุงุจุณุชู**.
- ุงูุชูุงูุงุช ุญุงูุช ูุงุจู ูพุดโุจู ู ูุงุจู ุขุฒูุงุด ูุณุชูุฏ.
- ููุดู reducer ุฎูุฏ ุฑุง ุฎุงูุต ูฺฏู ุฏุงุฑุฏ!

---

### ฑ.ณ `useContext`

**Context ฺุณุชุ** React Context ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ฺฉ ููุฏุงุฑ (ูุฑ ุฏุงุฏู JavaScript) ุฑุง ุงุฒ ุทุฑู ุฏุฑุฎุช ฺฉุงููพูููุช ุฎูุฏ ุจุฏูู ุงูฺฉู ูุฌุจูุฑ ุจุงุดุฏ props ุฑุง ุจู ุตูุฑุช ุฏุณุช ุฏุฑ ูุฑ ุณุทุญ ููุชูู ฺฉูุฏุ ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ. ููฺฉ `useContext` ุณุงุฏูโุชุฑู ุฑุงู ุจุฑุง ูุตุฑู ุขู ููุฏุงุฑ ูุดุชุฑฺฉ ุฏุฑ ฺฉ ฺฉุงููพูููุช ุชุงุจุน ุงุณุช.

---

#### ฑ.ณ.ฑ ุฑุงูููุง ฺฏุงู ุจู ฺฏุงู

ฑ. **ุงุฌุงุฏ ฺฉ Context**

```ts
import { createContext } from "react";

export const MyContext = createContext<ContextType>(defaultValue);
```

- **ูพุงุฑุงูุชุฑ ููุน**: ุดฺฉู ููุฏุงุฑ context ุฑุง ุชุนุฑู ฺฉูุฏ.
- **ููุฏุงุฑ ูพุดโูุฑุถ**: ููุท ุฒูุงู ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ูฺ Provider ูุทุงุจู ุฏุฑ ุจุงูุง ูุจุงุดุฏ.

ฒ. **ุงุฑุงุฆู Context**

```tsx
import { MyContext } from "./MyContext";

function App() {
  const sharedValue: ContextType = {
    /* โฆ */
  };

  return (
    <MyContext.Provider value={sharedValue}>
      <YourComponentTree />
    </MyContext.Provider>
  );
}
```

- ูุณูุชโูุง ุงุฒ ุฏุฑุฎุช ุฎูุฏ ุฑุง ฺฉู ูุงุฒ ุจู ุฏุณุชุฑุณ ุฏุงุฑูุฏุ ุจูพฺุฏ.

ณ. **ูุตุฑู ุจุง `useContext`**

```tsx
import { useContext } from "react";
import { MyContext } from "./MyContext";

function Child() {
  const ctx = useContext(MyContext);
  return <div>{/* ุงุฒ ctx ุงูุฌุง ุงุณุชูุงุฏู ฺฉูุฏ */}</div>;
}
```

ด. **ุงุฎุชุงุฑ: ุงุฌุงุฏ ฺฉ ููฺฉ ุณูุงุฑุด**
ููุทู ุฑุง ฺฉูพุณููู ฺฉูุฏ ู DX ุฑุง ุจูุจูุฏ ุฏูุฏ:

```ts
export function useMyContext() {
  const ctx = useContext(MyContext);
  if (ctx === undefined) {
    throw new Error("useMyContext ุจุงุฏ ุฏุฑูู ฺฉ MyContext.Provider ุงุณุชูุงุฏู ุดูุฏ");
  }
  return ctx;
}
```

---

#### ฑ.ณ.ฒ ุจูุชุฑู ุดููโูุง

- **ุงุฒ ุชุบุฑุงุช ูฺฉุฑุฑ ุจุฑุง ุจูโุฑูุฒุฑุณุงูโูุง ุณุฑุน ุฌููฺฏุฑ ฺฉูุฏ**

  - ุฏุงุฏูโูุง ุณุฑุนโุงูุชุบุฑ (ูุซู ูููุนุช ุงุณฺฉุฑูู) ุฑุง ุฏุฑ context ูุฑุงุฑ ูุฏูุฏ โ ุงุฒ props ุง ุญุงูุช ูุญู ุงุณุชูุงุฏู ฺฉูุฏ.

- **Context ูุง ุฑุง ุจุฑ ุงุณุงุณ ูฺฏุฑุงู ุชูุณู ฺฉูุฏ**

  - ุจู ุฌุง ฺฉ "mega-context"ุ context ูุง ุฌุฏุงฺฏุงูู ุจุฑุง ุชูุ ุงุญุฑุงุฒ ููุชุ ุชูุธูุงุช ุงุฌุงุฏ ฺฉูุฏ.

- **ุจู ุตูุฑุช ุงูู ุชุงูพ ฺฉูุฏ**

  - ููุดู ฺฉ ููุฏุงุฑ ูพุดโูุฑุถ ุฎูุจ ุชุงูพ ุดุฏู ุงุฑุงุฆู ุฏูุฏ ุง ุฏุฑ ฺฉ ููฺฉ ุณูุงุฑุด ูุญุงูุธุช ฺฉูุฏ.

---

#### ฑ.ณ.ณ ูุซุงูโูุง ุฏูุง ูุงูุน

- ูุจุชุฏ: ุชุบุฑ ุชู

  ```tsx
  // theme-context.tsx
  import { createContext, useContext, useState } from "react";

  type Theme = "light" | "dark";
  const ThemeContext = createContext<{
    theme: Theme;
    toggle: () => void;
  }>({ theme: "light", toggle: () => {} });

  export function ThemeProvider({ children }: { children: React.ReactNode }) {
    const [theme, setTheme] = useState<Theme>("light");
    const toggle = () => setTheme((t) => (t === "light" ? "dark" : "light"));

    return (
      <ThemeContext.Provider value={{ theme, toggle }}>
        {children}
      </ThemeContext.Provider>
    );
  }

  export function useTheme() {
    return useContext(ThemeContext);
  }

  // App.tsx
  import { ThemeProvider, useTheme } from "./theme-context";

  function Toolbar() {
    const { theme, toggle } = useTheme();
    return (
      <button className={theme} onClick={toggle}>
        ุชุบุฑ ุจู {theme === "light" ? "ุชุงุฑฺฉ" : "ุฑูุดู"}
      </button>
    );
  }

  export default function App() {
    return (
      <ThemeProvider>
        <Toolbar />
      </ThemeProvider>
    );
  }
  ```

---

- ูุชูุณุท: ุชุบุฑุฏููุฏู ุฒุจุงู

  ```tsx
  // language-context.tsx
  import { createContext, useContext, useState } from "react";

  type Lang = "en" | "fa";
  const LanguageContext = createContext<{
    lang: Lang;
    setLang: (l: Lang) => void;
  }>({ lang: "en", setLang: () => {} });

  export function LanguageProvider({
    children,
  }: {
    children: React.ReactNode;
  }) {
    const [lang, setLang] = useState<Lang>("en");
    return (
      <LanguageContext.Provider value={{ lang, setLang }}>
        {children}
      </LanguageContext.Provider>
    );
  }

  export function useLanguage() {
    return useContext(LanguageContext);
  }

  // Greeting.tsx
  import { useLanguage } from "./language-context";

  export function Greeting() {
    const { lang } = useLanguage();
    return <h1>{lang === "en" ? "Hello" : "ุณูุงู"}</h1>;
  }

  // ุงุณุชูุงุฏู ุฏุฑ App.tsx
  import { LanguageProvider } from "./language-context";
  import { Greeting } from "./Greeting";

  function App() {
    return (
      <LanguageProvider>
        <Greeting />
        {/* ฺฉ ุงูุชุฎุงุจโฺฉููุฏู ุฌุง ุงุถุงูู ฺฉูุฏ */}
      </LanguageProvider>
    );
  }
  ```

---

- ูพุดุฑูุชู: ุงุญุฑุงุฒ ููุช + ุฏุฑุงูุช ุฏุงุฏู + Memo

```tsx
// auth-context.tsx
import { createContext, useContext, useReducer, ReactNode } from "react";

interface User {
  id: string;
  name: string;
}

type State = { user: User | null };
type Action = { type: "LOGIN"; payload: User } | { type: "LOGOUT" };

const initialState: State = { user: null };

function authReducer(state: State, action: Action): State {
  switch (action.type) {
    case "LOGIN":
      return { user: action.payload };
    case "LOGOUT":
      return { user: null };
    default:
      return state;
  }
}

interface AuthContextType {
  user: User | null;
  login: (u: User) => void;
  logout: () => void;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: ReactNode }) {
  const [state, dispatch] = useReducer(authReducer, initialState);

  const login = (u: User) => {
    dispatch({ type: "LOGIN", payload: u });
  };

  const logout = () => {
    dispatch({ type: "LOGOUT" });
  };

  return (
    <AuthContext.Provider value={{ user: state.user, login, logout }}>
      {children}
    </AuthContext.Provider>
  );
}

export function useAuth() {
  const ctx = useContext(AuthContext);
  if (!ctx) {
    throw new Error("useAuth ุจุงุฏ ุฏุฑูู ฺฉ AuthProvider ุงุณุชูุงุฏู ุดูุฏ");
  }
  return ctx;
}
```

---

#### ฑ.ณ.ด ุชูุฑู ุฎุงูฺฏ

ฑ. **ูุจุชุฏ**

- ฺฉ `CounterContext` ุงุฌุงุฏ ฺฉูุฏ ฺฉู ฺฉ ุนุฏุฏ ู ฺฉ ุชุงุจุน `increment()` ุฑุง ูฺฏู ูโุฏุงุฑุฏ.
- ุขู ุฑุง ุฏุฑ ุฏู ฺฉุงููพูููุช ููโุณุทุญ ูุตุฑู ฺฉูุฏ: ฺฉ ุชุนุฏุงุฏ ุฑุง ููุงุด ูโุฏูุฏุ ุฏฺฏุฑ ุฏฺฉููโุง ุจุฑุง ุงูุฒุงุด ุฏุงุฑุฏ.

ฒ. **ูุชูุณุท**

- **ุชุบุฑุฏููุฏู ุฒุจุงู** ุฑุง ฺฏุณุชุฑุด ุฏูุฏ: ฺฉ dropdown ุจุฑุง ุงูุชุฎุงุจ `en | fa | es` ุงุถุงูู ฺฉูุฏุ `Greeting` ุฑุง ุจุฑุง ูุฏุฑุช ูุฑ ุณู ุจูโุฑูุฒุฑุณุงู ฺฉูุฏุ ู ุงูุชุฎุงุจ ุฑุง ุฏุฑ `localStorage` ุฐุฎุฑู ฺฉูุฏ.

ณ. **ูพุดุฑูุชู**

- ฺฉ **AuthFlow** ุจุณุงุฒุฏ:

  ฑ. `AuthContext` ุจุง `login`ุ `logout`ุ `user` ุงุฌุงุฏ ฺฉูุฏ.
  ฒ. ุฏุฑ ูุฑูุฏุ ฺฉ ูพุฑููุงู ฺฉุงุฑุจุฑ ุงุฒ ฺฉ API ุฌุนู ุฏุฑุงูุช ฺฉูุฏ.
  ณ. ูุณุฑูุง ุฎุงุต ุฑุง ูุญุงูุธุช ฺฉูุฏ (ุงุฒ React Router ุงุณุชูุงุฏู ฺฉูุฏ).
  ด. ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ููุฏุงุฑ `AuthContext` memoized ุงุณุช.
  ต. ฺฉ ููฺฉ ุณูุงุฑุด `useRequireAuth` ุงุถุงูู ฺฉูุฏ ฺฉู ุงฺฏุฑ ุงุญุฑุงุฒ ููุช ูุดุฏู ุจุงุดุฏุ redirect ฺฉูุฏ.

---

### ฑ.ด `useRef`

`useRef` ฺฉ ููฺฉ React ุงุณุช ฺฉู ุจู ุดูุง ฺฉ **ููุฏุงุฑ ูุงุจู ุชุบุฑ ูโุฏูุฏ ฺฉู ุฏุฑ ุทูู ุฑูุฏุฑูุง ุจุงู ูโูุงูุฏ ุงูุง ุจุงุนุซ re-render ููโุดูุฏ ููุช ุชุบุฑ ูโฺฉูุฏ.**

ุดูุง ููฺูู ูโุชูุงูุฏ ุงุฒ ุขู ุจุฑุง ฺฏุฑูุชู ฺฉ **ูุฑุฌุน ุจู ฺฉ ุนูุตุฑ DOM** ุงุณุชูุงุฏู ฺฉูุฏุ ฺฉู ุฑุงุฌโุชุฑู ููุฑุฏ ุงุณุชูุงุฏู ุงุณุช.

---

#### ฑ.ด.ฑ ูุญู

```tsx
const ref = useRef<T | null>(initialValue);
```

ุงูุฌุง:

- `T` ููุน ููุฏุงุฑ ุงุณุช (ูุซู `HTMLInputElement`ุ `number`ุ ู ุบุฑู).
- `initialValue` ูุนูููุงู `null` ุงุณุช ุงฺฏุฑ ุจุง ุนูุงุตุฑ DOM ฺฉุงุฑ ูโฺฉูุฏ.

---

#### ฑ.ด.ฒ ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู

    โ ููุช ูุงุฒ ุฏุงุฑุฏ:

    - ุฏุงุฏู **ูุงุจู ุชุบุฑ** ุฑุง ุฐุฎุฑู ฺฉูุฏ ฺฉู **ุจุฑ ุฑูุฏุฑ ฺฉุฑุฏู ุชุฃุซุฑ ููโฺฏุฐุงุฑุฏ**.
    - ุฏุณุชุฑุณ **ูุณุชูู DOM** ุจฺฏุฑุฏ (ูุซู ููฺฉูุณ ฺฉุฑุฏู ฺฉ ูุฑูุฏุ ุงุณฺฉุฑูู ฺฉุฑุฏู ฺฉ divุ ู ุบุฑู).

---

#### ฑ.ด.ณ ูุซุงู ูุจุชุฏ โ ููฺฉูุณ ูุฑูุฏ

ฺฉ ูุซุงู ฺฉูุงุณฺฉ ุงุฒ ุฏุณุชุฑุณ ุจู ฺฉ ุนูุตุฑ DOM ู ูุฑุงุฎูุงู ูุชุฏ `.focus()` ุขู.

```tsx
import { useRef } from "react";

function FocusInput() {
  const inputRef = useRef<HTMLInputElement>(null);

  const handleFocus = () => {
    inputRef.current?.focus();
  };

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleFocus}>ููฺฉูุณ</button>
    </>
  );
}

export default FocusInput;
```

    **ฺู ุงุชูุงู ูโุงูุชุฏุ**

    ฑ๏ธโฃ ุฏุฑ ุงููู ุฑูุฏุฑุ `inputRef.current` ุจุฑุงุจุฑ `null` ุงุณุช.
    ฒ๏ธโฃ ูพุณ ุงุฒ ุงูฺฉู React `<input />` ุฑุง ุฑูุฏุฑ ฺฉุฑุฏุ ฺฏุฑู DOM ุฑุง ุจู `inputRef.current` ุงุฎุชุตุงุต ูโุฏูุฏ.
    ณ๏ธโฃ ฺฉูฺฉ ฺฉุฑุฏู ุฑู ุฏฺฉูู ูุชุฏ `.focus()` ุฑุง ุฑู ุขู ฺฏุฑู DOM ูุฑุงุฎูุงู ูโฺฉูุฏ.

---

#### ฑ.ด.ด ุจูุชุฑู ุดููโูุง

โ ุงุฒ `useRef` ุงุณุชูุงุฏู ฺฉูุฏ:

- ุจุฑุง ุฏุณุชุฑุณ DOM (`inputRef`ุ `scrollRef`ุ ู ุบุฑู).
- ุจุฑุง **ููุงุฏุฑ ูุงุจู ุชุบุฑ** ฺฉู ูุงุฒ ุจู ุดุฑูุน re-render ูุฏุงุฑูุฏ.

โ ุงุฒ `useRef` ุจุฑุง ููุงุฑุฏ ุฒุฑ ุงุณุชูุงุฏู ูฺฉูุฏ:

- ุญุงูุช ฺฉู ุจุฑ ุขูฺู ุฏุฑ UI ูโุจูุฏ ุชุฃุซุฑ ูโฺฏุฐุงุฑุฏ โ ุจู ุฌุง ุขู ุงุฒ `useState` ุงุณุชูุงุฏู ฺฉูุฏ.

๐ฏ ref ูุง DOM ุฑุง ุจุง `null` ููุฏุงุฑุฏู ุงููู ฺฉูุฏุ ู ููุดู ูุจู ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุขูโูุง ุจุง optional chaining (`?.`) ุจุฑุฑุณ ฺฉูุฏ.

---

#### ฑ.ด.ต ูุซุงู ูุชูุณุท โ ุงุณฺฉุฑูู ุจู ุจุงูุง

ฺฉ ุตูุญู ุทููุงู ฺฉู ูโุชูุงูุฏ ุจู ุจุงูุง ุขู ุงุณฺฉุฑูู ฺฉูุฏ.

```tsx
import { useRef } from "react";

function ScrollToTop() {
  const containerRef = useRef<HTMLDivElement>(null);

  const handleScrollTop = () => {
    containerRef.current?.scrollTo({ top: 0, behavior: "smooth" });
  };

  return (
    <div>
      <button onClick={handleScrollTop}>ุงุณฺฉุฑูู ุจู ุจุงูุง</button>
      <div
        ref={containerRef}
        style={{
          height: "200px",
          overflow: "auto",
          border: "1px solid black",
          marginTop: "10px",
        }}
      >
        <div style={{ height: "800px" }}>
          <p>ูุญุชูุง ุฒุงุฏ ุงูุฌุง. ุจู ุงุณฺฉุฑูู ฺฉุฑุฏู ุงุฏุงูู ุฏูุฏ...</p>
        </div>
      </div>
    </div>
  );
}

export default ScrollToTop;
```

---

#### ฑ.ด.ถ ูุซุงู ูพุดุฑูุชู โ ุฐุฎุฑู ุชุงุฑุฎฺู ฺฉูฺฉโูุง ุจุฏูู Re-render

ุดูุง ูโุชูุงูุฏ ุงุฒ `useRef` ุจุฑุง ุฐุฎุฑู ุฏุงุฏู **ุฏุฑ ุทูู ุฑูุฏุฑูุง** ุงุณุชูุงุฏู ฺฉูุฏุ ุญุช ุงฺฏุฑ ุฑู ุตูุญู ููุงุด ุฏุงุฏู ูุดูุฏุ ู ุจุงุนุซ re-render ููโุดูุฏ.

```tsx
import { useRef, useState } from "react";

function ClickHistory() {
  const [count, setCount] = useState(0);
  const historyRef = useRef<number[]>([]);

  const handleClick = () => {
    setCount((prev) => {
      const newCount = prev + 1;
      historyRef.current.push(newCount); // ุฐุฎุฑู ุฏุฑ ุชุงุฑุฎฺู
      return newCount;
    });
  };

  const showHistory = () => {
    alert(`ุชุงุฑุฎฺู: ${historyRef.current.join(", ")}`);
  };

  return (
    <>
      <p>ุชุนุฏุงุฏ ูุนู: {count}</p>
      <button onClick={handleClick}>ุงูุฒุงุด</button>
      <button onClick={showHistory}>ููุงุด ุชุงุฑุฎฺู</button>
    </>
  );
}

export default ClickHistory;
```

---

ฺู ุงุชูุงู ูโุงูุชุฏุ

โ ูุฑ ุจุงุฑ ฺฉู ุฑู **ุงูุฒุงุด** ฺฉูฺฉ ูโฺฉูุฏุ `count` ุฑุง ุงูุฒุงุด ูโุฏูู.
โ ุฏุฑ ููุงู ุฒูุงูุ ุชุนุฏุงุฏ ุฌุฏุฏ ุฑุง ุฏุฑ ุขุฑุงู `historyRef.current` ุฐุฎุฑู ูโฺฉูู.
โ ุงู ุชุงุฑุฎฺู **ุจุงุนุซ** re-render ููโุดูุฏ โ ููุท ฺฉ ุฐุฎุฑูโุณุงุฒ ุขุฑุงู ุงุณุช.
โ ููุช ุฑู **ููุงุด ุชุงุฑุฎฺู** ูุดุงุฑ ูโุฏูุฏุ ุชูุงู ุชุนุฏุงุฏูุง ูุจู ุฑุง ูุดุงู ูโุฏูุฏ.

---

ฺุฑุง ุงู ุฎูุจ ุงุณุช:

- ุดูุง ุงุฏ ูโฺฏุฑุฏ ฺฉู `useRef` ฺฺฏููู ุฏุงุฏู ุฑุง ุฏุฑ ุทูู ุฑูุฏุฑูุง ูฺฏู ูโุฏุงุฑุฏ.
- ูุงุฒ ุจู ุงุณุชูุงุฏู ุงุฒ `useEffect` ูุฏุงุฑุฏ.
- ูุดุงู ูโุฏูุฏ ฺฉู `useRef` _ูุงฺฉูุด ูุณุช_ โ ููุท ุฏุงุฏู ุฑุง ุขุฑุงู ุฐุฎุฑู ูโฺฉูุฏ.

---

ุณูุงุฑููุง ุฏูุง ูุงูุน

โ ููฺฉูุณ ฺฉุฑุฏู ฺฉ ูุฑูุฏ ููุช ฺฉ modal ุจุงุฒ ูโุดูุฏ.
โ ุงุณฺฉุฑูู ฺฉุฑุฏู ฺฉ ูพูุฌุฑู ฺุช ุจู ูพุงู ููุช ูพุงู ุฌุฏุฏ ูโุฑุณุฏ.
โ ุฐุฎุฑู ID ูุง interval ุง ุชุงูุฑูุง.
โ ุงูุฏุงุฒูโฺฏุฑ ุงุจุนุงุฏ ุนูุตุฑ ุจุง `getBoundingClientRect`.

---

#### ฑ.ด.ท ุฌุฏูู ุฎูุงุตู

| ูฺฺฏ                           | `useRef`                            |
| ------------------------------- | ----------------------------------- |
| ุจุงุนุซ ุฑูุฏุฑ ูโุดูุฏุ               | โ ุฎุฑ                              |
| ุนูุตุฑ DOM ุฐุฎุฑู ูโฺฉูุฏุ          | โ ุจูู                              |
| ููุงุฏุฑ ูุงุจู ุชุบุฑ ุฐุฎุฑู ูโฺฉูุฏุ | โ ุจูู                              |
| ุจูุชุฑู ุจุฑุง ุญุงูุช UIุ            | โ ุฎุฑ (ุงุฒ `useState` ุงุณุชูุงุฏู ฺฉูุฏ) |

---

#### ฑ.ด.ธ ุชูุฑู ุฎุงูฺฏ

- ูุจุชุฏ:

  - ฺฉ ูุฑู ุจุณุงุฒุฏ ฺฉู ฺฉูฺฉ ฺฉุฑุฏู ุฑู ุฏฺฉูู ุงููู ููุฏ ุฎุงู ุฑุง ููฺฉูุณ ฺฉูุฏ.

- ูุชูุณุท:

  - ฺฉ `div` ุงุณฺฉุฑููโุดููุฏู ุจุง ููุงุฑุฏ ุฒุงุฏ ุจุณุงุฒุฏ ู ุฏฺฉููโุง ุจุฑุง ุงุณฺฉุฑูู ุจู ูพุงู ุง ุจุงูุง ุจู ุตูุฑุช ูุฑู.

- ูพุดุฑูุชู:

  - ฺฉุงููพูููุช ุจุณุงุฒุฏ ฺฉู ูููุนุช ูุจู ู ูุนู ูุงูุณ ุฑุง ูพฺฏุฑ ฺฉูุฏุ ูููุนุช ูุจู ุฑุง ููุท ุงุฒ ุทุฑู `useRef` ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

---

#### ฑ.ด.น ุฎูุงุตู

โจ `useRef` ุนุจุงุฑุช ุงุณุช ุงุฒ:

- ุฑุงู ุจุฑุง ูฺฏู ุฏุงุดุชู ฺฉ ููุฏุงุฑ ูพุงุฏุงุฑ ุจุฏูู ุงูฺฉู ุจุงุนุซ re-render ุดูุฏ.
- ุฑูุด ุงุตู ุจุฑุง ุฏุณุชุฑุณ ุจู ฺฏุฑูโูุง DOM.

---

### ฑ.ต `useEffect`

#### ฑ.ต.ฑ ุงุซุฑ ุฌุงูุจ ฺุณุชุ

**ุชุนุฑู**:
ุฏุฑ ุจุฑูุงููโููุณ (ุจู ุทูุฑ ุฎุงุต React)ุ ฺฉ **ุงุซุฑ ุฌุงูุจ** ูุฑ ฺุฒ ุงุณุช ฺฉู ฺฉ ุชุงุจุน ุงูุฌุงู ูโุฏูุฏ ฺฉู ุจุฑ ฺุฒ ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ููุฑ ุฎูุฏ ุชุงุจุน ุชุฃุซุฑ ูโฺฏุฐุงุฑุฏ.

**ูุซุงูโูุง ุณุงุฏู ุงุซุฑุงุช ุฌุงูุจ**:

    - ุฏุฑุงูุช ุฏุงุฏู ุงุฒ ฺฉ ุณุฑูุฑ.
    - ุจูโุฑูุฒุฑุณุงู ุฏุณุช DOM.
    - ุชูุธู ุชุงูุฑูุง (setTimeoutุ setInterval).
    - ุงุดุชุฑุงฺฉ ุฏุฑ ุฑูุฏุงุฏูุง.
    - ุซุจุช ฺุฒ ุฏุฑ ฺฉูุณูู.

**ูุซุงู ุขุณุงูโููู**:

ุชุตูุฑ ฺฉูุฏ ุจู ฺฉ ุฏุณุชฺฏุงู ATM ูโุฑูุฏ:

- **ุงุซุฑ ุงุตู**: ุจุฑุฏุงุดุช ูพูู.
- **ุงุซุฑ ุฌุงูุจ**: ุจุงูฺฉ ุจุฑุง ุดูุง ฺฉ ูพุงูฺฉ SMS ุงุฑุณุงู ูโฺฉูุฏ.

ฺฉุงุฑ ุงุตู ุจุฑุฏุงุดุช ูพูู ุจูุฏุ ุงูุง ฺฉ ฺฉุงุฑ ุงุถุงู โ ุงุฑุณุงู SMS โ ุฎุงุฑุฌ ุงุฒ ฺฉุงุฑ ุงุตู ุฑุฎ ุฏุงุฏ.

---

#### ฑ.ต.ฒ ฺุฑุง React ุจู useEffect ูุงุฒ ุฏุงุฑุฏุ

ฺฉุงููพูููุชโูุง React ุจุงุฏ ุฎุงูุต ู ูุงุจู ูพุดโุจู ุจุงุดูุฏ. ุจุง ุงู ุญุงูุ ุจุฑุง ููุงุจูู ุจุง ุงูพูฺฉุดูโูุง ุฏูุง ูุงูุนุ ฺฏุงู ุงููุงุช ูุงุฒ ุจู ุงูุฌุงู ุงุซุฑุงุช ุฌุงูุจ ูุงููุฏ ุฏุฑุงูุช ุฏุงุฏูุ ุฏุณุชฺฉุงุฑ DOMุ ู ุชุงูุฑูุง ุฏุงุฑุฏ.

**ูููุฏุงุฑ ุฌุฑุงู**:

```
ฺฉุงููพูููุช React
       |
       |----> ุฑูุฏุฑ UI (ุจุฏูู ุงุซุฑุงุช ุฌุงูุจ!)
       |
       |----> ุงูุฌุงู ุงุซุฑุงุช ุฌุงูุจ ูพุณ ุงุฒ ุฑูุฏุฑ (useEffect)
                    |
                    |-- ุฏุฑุงูุช ุฏุงุฏู
                    |-- ุชุงูุฑ / ููุงุตู
                    |-- ุจูโุฑูุฒุฑุณุงู ูุณุชูู DOM
```

---

#### ฑ.ต.ณ ููฺฉ useEffect ุฏุฑ React

React ฺฉ ููฺฉ ุฏุงุฎู ุจู ูุงู `useEffect` ุจุฑุง ูุฏุฑุช ุงู ุงุซุฑุงุช ุฌุงูุจ ุงุฑุงุฆู ูโุฏูุฏ.

**ูุญู**:

```jsx
useEffect(() => {
  // ฺฉุฏ ุงุซุฑ ุฌุงูุจ ุงูุฌุง

  return () => {
    // ฺฉุฏ ูพุงฺฉุณุงุฒ (ุงุฎุชุงุฑ)
  };
}, [dependencies]);
```

**ูพุงุฑุงูุชุฑูุง useEffect ุชูุถุญ ุฏุงุฏู ุดุฏู:**

- **ุชุงุจุน ุงุซุฑ**: ูพุณ ุงุฒ ุฑูุฏุฑ ุงุฌุฑุง ูโุดูุฏ.
- **ุขุฑุงู ูุงุจุณุชฺฏ**: ุชุนู ูโฺฉูุฏ ฺฉู ฺู ุฒูุงู ุงุซุฑ ุงุฌุฑุง ูโุดูุฏ.
- **ุชุงุจุน ูพุงฺฉุณุงุฒ**: ุงุฎุชุงุฑุ ูุจู ุงุฒ ุงุซุฑ ุจุนุฏ ุง ุฏุฑ unmount ุงุฌุฑุง ูโุดูุฏ.

---

#### ฑ.ต.ด ูููุฏุงุฑ ุฌุฑุงู ฺุฑุฎู ุญุงุช useEffect

```
ฺฉุงููพูููุช Mount ูโุดูุฏ (ุงููู ุฑูุฏุฑ)
       |
       |--> useEffect ุงุฌุฑุง ูโุดูุฏ
       |        |
       |        --> ุงุซุฑ ุฌุงูุจ ุงุฌุฑุง ูโุดูุฏ
       |
ุชุบุฑ ุญุงูุช ุง Props
       |
       |--> React ุขุฑุงู ูุงุจุณุชฺฏ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ
                |
                |--> [ุชุบุฑ ฺฉุฑุฏูุ]
                        |
                        |--> ุจูู: ูพุงฺฉุณุงุฒ ุงุซุฑ ูุจู (ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ)ุ ุณูพุณ ุงุซุฑ ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉู
                        |--> ุฎุฑ: ุฑุฏ ฺฉู
       |
ฺฉุงููพูููุช Unmount ูโุดูุฏ
       |
       |--> ูพุงฺฉุณุงุฒ ุงุฌุฑุง ูโุดูุฏ (ุงฺฏุฑ ุงุฑุงุฆู ุดุฏู ุจุงุดุฏ)
```

---

#### ฑ.ต.ต ูุซุงูโูุง useEffect (ูุจุชุฏุ ูุชูุณุทุ ูพุดุฑูุชู)

---

- **ูุซุงู ูุจุชุฏ: useEffect ุณุงุฏู**

  ููุท "ุณูุงู" ุฑุง ููุช ฺฉุงููพูููุช ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ ุซุจุช ฺฉูุฏ:

  ```jsx
  import { useEffect } from "react";

  function HelloWorld() {
    useEffect(() => {
      console.log("ุณูุงูุ ุงุซุฑ ุฌุงูุจ!");
    }, []);

    return <h1>ุณูุงู ุฏูุง</h1>;
  }
  ```

- **ูุซุงู ูุชูุณุท: ุฏุฑุงูุช ุฏุงุฏู**

  ุฏุฑุงูุช ุฏุงุฏู ุงุฒ API ููุช ฺฉุงููพูููุช ุจุฑุง ุงููู ุจุงุฑ ุฑูุฏุฑ ูโุดูุฏ:

  ```jsx
  import { useEffect, useState } from "react";

  function UserList() {
    const [users, setUsers] = useState([]);

    useEffect(() => {
      fetch("https://jsonplaceholder.typicode.com/users")
        .then((res) => res.json())
        .then((data) => setUsers(data));
    }, []);

    return (
      <ul>
        {users.map((user) => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    );
  }
  ```

- **ูุซุงู ูพุดุฑูุชู: ุชุงูุฑ ุจุง ูพุงฺฉุณุงุฒ**

  ฺฉ ุชุงูุฑ ุดูุงุฑุด ูุนฺฉูุณ ฺฉู ุฎูุฏุด ุฑุง ูพุงฺฉ ูโฺฉูุฏ:

  ```jsx
  import { useEffect, useState } from "react";

  function Timer() {
    const [seconds, setSeconds] = useState(10);

    useEffect(() => {
      const timerId = setInterval(() => {
        setSeconds((s) => s - 1);
      }, 1000);

      // ูพุงฺฉุณุงุฒ interval ุฏุฑ unmount
      return () => clearInterval(timerId);
    }, []);

    return <h1>{seconds} ุซุงูู ุจุงู ูุงูุฏู!</h1>;
  }
  ```

---

#### ฑ.ต.ถ ุจูุชุฑู ุดููโูุง

- **ูุงุจุณุชฺฏโูุง:** ููุดู ุจู ูุถูุญ ูุดุฎุต ฺฉูุฏ. ุฎุงู ฺฏุฐุงุดุชู ุนู ฺฉ ุจุงุฑ ุฏุฑ mount ุงุฌุฑุง ุดูุฏ.
- **ูพุงฺฉุณุงุฒ:** ููุดู interval ูุงุ ุงุดุชุฑุงฺฉโูุง ุฑุง ูพุงฺฉ ฺฉูุฏ ุชุง ุงุฒ ูุดุช ุญุงูุธู ุฌููฺฏุฑ ฺฉูุฏ.
- **ุชูุณู:** ุงุซุฑุงุช ุฌุงูุจ ุบุฑูุฑุชุจุท ุฑุง ุฏุฑ ููฺฉโูุง `useEffect` ุฌุฏุงฺฏุงูู ุจุฑุง ูุถูุญ ุชูุณู ฺฉูุฏ.

**ุฎูุจ:**

```jsx
useEffect(() => {
  fetchData();
}, []);
useEffect(() => {
  document.title = "ุงูพ ูู";
}, [title]);
```

---

#### ฑ.ต.ท ุชูุฑู ุฎุงูฺฏ

**ูุจุชุฏ:**

- ฺฉ ฺฉุงููพูููุช React ุงุฌุงุฏ ฺฉูุฏ ฺฉู ุนููุงู ุณูุฏ ุฑุง ุจู "ุณูุงู ุฏูุง" ฺฉ ุจุงุฑ ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ `useEffect` ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

**ูุชูุณุท:**

- ฺฉุงููพูููุช ุงุฌุงุฏ ฺฉูุฏ ฺฉู ูุณุช ุงุฒ ูพุณุชโูุง ุฑุง ุงุฒ `jsonplaceholder.typicode.com/posts` ุฏุฑุงูุช ู ููุงุด ุฏูุฏ.

**ูพุดุฑูุชู:**

- ฺฉุงููพูููุช ุงุฌุงุฏ ฺฉูุฏ ฺฉู ุจู ุชุบุฑ ุงูุฏุงุฒู ูพูุฌุฑู ฺฏูุด ุฏูุฏ ู ุงูุฏุงุฒู ูุนู ูพูุฌุฑู ุฑุง ููุงุด ุฏูุฏ. ูุฑุงููุด ูฺฉูุฏ ฺฉู ูพุงฺฉ ฺฉูุฏ!

---

#### ฑ.ต.ธ **ูุซุงู ุฏูุง ูุงูุน: ุฒูฺฏ ุงุนูุงู**

ฺฉ ุฒูฺฏ ุงุนูุงู ๐ ุฑุง ุชุตูุฑ ฺฉูุฏ ฺฉู ูุดุงู ูโุฏูุฏ ฺูุฏ ูพุงู ุฌุฏุฏ ุฏุงุฑุฏ.

```jsx
import { useEffect, useState } from "react";

function NotificationBell() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      fetch("https://api.example.com/notifications/unread-count")
        .then((res) => res.json())
        .then((data) => setCount(data.count));
    }, 5000);

    return () => clearInterval(intervalId);
  }, []);

  return <button>๐ {count}</button>;
}
```

**ฺู ุงุชูุงู ุงูุฌุง ุงูุชุงุฏุ**

- ฺฉุงููพูููุช ุงุนูุงูโูุง ูุฎูุงูุฏู ุฑุง ูุฑ ต ุซุงูู ุฏุฑุงูุช ูโฺฉูุฏ.
- ุงฺฏุฑ ฺฉุงููพูููุช ุฑุง ุชุฑฺฉ ฺฉูุฏ ุง ุจุจูุฏุฏุ interval ุฑุง ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูพุงฺฉ ูโฺฉูุฏ.

---

#### ฑ.ต.น **ูููุฏุงุฑ ุฎูุงุตู (ููู ุจุง ูู):**

```
ฺฉุงููพูููุช React
  |
  | ุฑูุฏุฑ
  |
  |---> ุงุซุฑุงุช ุฌุงูุจ (useEffect)
          |
          |-- ุฏุฑุงูุช ุฏุงุฏู
          |-- ุฏุณุชฺฉุงุฑ DOM
          |-- ฺฏูุดโุฏููุฏฺฏุงู ุฑูุฏุงุฏ/ุงุดุชุฑุงฺฉโูุง
          |
          |--- ูพุงฺฉุณุงุฒ ุงุฎุชุงุฑ (ุชุงุจุน return)
```

---

๐ **ูฺฉุงุช ฺฉูุฏ**

- ุงุซุฑุงุช ุฌุงูุจ ูพุณ ุงุฒ ุฑูุฏุฑ ุฑุฎ ูโุฏููุฏ.
- React `useEffect` ุฑุง ุจุฑุง ูุฏุฑุช ุชูุฒ ุงู ุงุซุฑุงุช ุฌุงูุจ ุงุฑุงุฆู ูโุฏูุฏ.
- ุขุฑุงูโูุง ูุงุจุณุชฺฏ ฺฉูุชุฑู ูโฺฉููุฏ ฺฉู ฺู ุฒูุงู ุงุซุฑุงุช ุงุฌุฑุง ูโุดููุฏ.
- ููุดู ูพุงฺฉุณุงุฒ ฺฉูุฏ ุชุง ุงุฒ ุจุงฺฏโูุง ู ูุดุช ุญุงูุธู ุฌููฺฏุฑ ฺฉูุฏ.

#### ฑ.ต.ฑฐ ุบูุฑ ุนูู: ูพุงฺฉุณุงุฒ ุฏุฑ useEffect (ูุงุฒ Unmounting)

- **ฺฏุงู ฑ: ูพุงฺฉุณุงุฒ ุฏุฑ React ฺุณุชุ**

ููุช ุงุซุฑุงุช ุฌุงูุจ ุฑุง ุฏุฑ React ุงุฌุฑุง ูโฺฉูุฏุ ฺฏุงู ุงููุงุช ูุงุฒ ุฏุงุฑุฏ ุขูโูุง ุฑุง "ูพุงฺฉ ฺฉูุฏ" ูพุณ ุงุฒ ุงูฺฉู ฺฉุงุฑุชุงู ุชูุงู ุดุฏุ ุจู ุฎุตูุต ููุช ฺฉุงููพูููุช **unmount** ูโุดูุฏ (ุงุฒ ุตูุญู ุญุฐู ูโุดูุฏ).

ุชุงุจุน ูพุงฺฉุณุงุฒ ฺฉูฺฉ ูโฺฉูุฏ ุงุฒ ููุงุฑุฏ ุฒุฑ ุฌููฺฏุฑ ฺฉูุฏ:

- ูุดุช ุญุงูุธู
- ุฑูุชุงุฑูุง ูุงุฎูุงุณุชู
- ุฎุทุงูุง ุจู ุฏูู ุนููุงุช ุฑู ุนูุงุตุฑ ุบุฑููุฌูุฏ

---

- **ฺฏุงู ฒ: ฺุฑุฎู ุญุงุช ฺฉุงููพูููุช ู ูพุงฺฉุณุงุฒ**

ุฏุฑ ุงูุฌุง ฺฉ ูููุฏุงุฑ ุฌุฑุงู ุณุงุฏู ุจุตุฑ ูุฌูุฏ ุฏุงุฑุฏ:

```
Mount ฺฉุงููพูููุช
     |
     |---- useEffect ุงุฌุฑุง ูโุดูุฏ
     |          |
     |          |---> ุงุซุฑ ุฌุงูุจ ุดุฑูุน ุดุฏ
     |
ุจูโุฑูุฒุฑุณุงู ฺฉุงููพูููุช (ุชุบุฑ ุญุงูุช/props)
     |
     |-- ูพุงฺฉุณุงุฒ (ุงฺฏุฑ ูุงุจุณุชฺฏโูุง ุชุบุฑ ฺฉุฑุฏู ุจุงุดูุฏ)
     |      |
     |      |---> ุงุซุฑ ูุจู ูพุงฺฉ ุดุฏ
     |
     |-- ุงุซุฑ ุฏูุจุงุฑู ุงุฌุฑุง ูโุดูุฏ (ุงฺฏุฑ deps ุชุบุฑ ฺฉุฑุฏู ุจุงุดูุฏ)
     |
Unmount ฺฉุงููพูููุช (ฺฉุงููพูููุช ุชุฑฺฉ ูโฺฉูุฏ)
     |
     |-- ุชุงุจุน ูพุงฺฉุณุงุฒ ุงุฌุฑุง ูโุดูุฏ
            |
            |---> ูพุงฺฉุณุงุฒ ุชูุงู ุดุฏ
```

**ููู:**

- ูพุงฺฉุณุงุฒ **ูุจู ุงุฒ** unmount ฺฉุงููพูููุช ุฑุฎ ูโุฏูุฏ.
- ุจู React ุงุฌุงุฒู ูโุฏูุฏ ููุงุจุน ุฑุง ุจู ุทูุฑ ููุงุณุจ ูุฏุฑุช ฺฉูุฏ.

---

- **ฺฏุงู ณ: ฺู ุฒูุงู ุจู ูพุงฺฉุณุงุฒ ูุงุฒ ุฏุงุฑุฏุ**

ุณูุงุฑููุง ุฑุงุฌ:

- **ฺฏูุดโุฏููุฏฺฏุงู ุฑูุฏุงุฏ** (ูุซู ุชุบุฑ ุงูุฏุงุฒูุ ุงุณฺฉุฑูู)
- **ููุงุตู ู ุชุงูุฑูุง**
- **ุงุดุชุฑุงฺฉโูุง** (ูุซู WebSocketsุ Reduxุ Firebase listeners)
- **ูุบู ุฏุฑุฎูุงุณุชโูุง HTTP**

---

- **ฺฏุงู ด: ูุญู ูพุงฺฉุณุงุฒ ูพุงู**

```jsx
useEffect(
  () => {
    // ุงุซุฑ ุฌุงูุจ
    console.log("ุงุซุฑ ุงุฌุฑุง ุดุฏ!");

    // ุชุงุจุน ูพุงฺฉุณุงุฒ
    return () => {
      console.log("ูพุงฺฉ ุดุฏ!");
    };
  },
  [
    /* ูุงุจุณุชฺฏโูุง */
  ]
);
```

- ุงฺฏุฑ ุงุฒ `useEffect` ุฎูุฏ ฺฉ ุชุงุจุน ุจุฑฺฏุฑุฏุงูุฏุ React ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุขู ุฑุง ุงุฌุฑุง ูโฺฉูุฏ ููุช:

  - **ฺฉุงููพูููุช unmount ูโุดูุฏ**
  - ูุงุจุณุชฺฏโูุง **ุชุบุฑ ูโฺฉููุฏ** (ุงุซุฑ ูุจู ูพุงฺฉ ูโุดูุฏุ ุณูพุณ ุงุซุฑ ุฌุฏุฏ ุงุฌุฑุง ูโุดูุฏ)

---

- **ฺฏุงู ต: ูุซุงูโูุง ุนูู**

  - **ูุซุงู ูุจุชุฏ: ูพุงฺฉุณุงุฒ ุจุง ุชุงูุฑ**

  ุดูุงุฑุด ุซุงููโูุง:

  ```jsx
  import { useEffect, useState } from "react";

  function Timer() {
    const [count, setCount] = useState(0);

    useEffect(() => {
      const timerId = setInterval(() => {
        setCount((prev) => prev + 1);
      }, 1000);

      // ุชุงุจุน ูพุงฺฉุณุงุฒ
      return () => clearInterval(timerId);
    }, []);

    return <div>ุซุงููโูุง ฺฏุฐุดุชู: {count}</div>;
  }
  ```

  **ุชูุถุญ:**

  - ุชุงูุฑ ุฏุฑ mount ุดุฑูุน ูโุดูุฏ.
  - ุชุงูุฑ ุฏุฑ unmount ูพุงฺฉ ูโุดูุฏ ุชุง ุงุฒ ูุดุช ุญุงูุธู ุง ุจูโุฑูุฒุฑุณุงู ุญุงูุช ุฏุฑ ฺฉุงููพูููุช unmounted ุฌููฺฏุฑ ฺฉูุฏ.

---

    - **ูุซุงู ูุชูุณุท: ฺฏูุดโุฏููุฏู ุชุบุฑ ุงูุฏุงุฒู ูพูุฌุฑู**

    ฺฏูุด ุฏุงุฏู ุจู ุงูุฏุงุฒู ูพูุฌุฑู ูุฑูุฑฺฏุฑ:

```jsx
import { useEffect, useState } from "react";

function WindowSize() {
  const [size, setSize] = useState({
    width: window.innerWidth,
    height: window.innerHeight,
  });

  useEffect(() => {
    const handleResize = () => {
      setSize({ width: window.innerWidth, height: window.innerHeight });
    };

    window.addEventListener("resize", handleResize);

    // ูพุงฺฉุณุงุฒ ฺฏูุดโุฏููุฏู ุฏุฑ unmount
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  return (
    <div>
      ุงูุฏุงุฒู ูพูุฌุฑู: {size.width}px x {size.height}px
    </div>
  );
}
```

**ุชูุถุญ:**

- ฺฏูุดโุฏููุฏู ุชุบุฑ ุงูุฏุงุฒู ุงุถุงูู ูโุดูุฏ.
- ฺฏูุดโุฏููุฏู ุฏุฑ unmount ุญุฐู ูโุดูุฏ ุชุง ุงุฒ ูุดุช ุฌููฺฏุฑ ฺฉูุฏ.

---

- **ูุฑุฌุน ุณุฑุน (ุฎูุงุตู ูููุฏุงุฑ ุฌุฑุงู):**

```
ฺฉุงููพูููุช React
       |
       | Mount ูโุดูุฏ
       |
 useEffect() ุงุซุฑ ุฌุงูุจ ุดุฑูุน ูโุดูุฏ
       |
       | ุจูโุฑูุฒุฑุณุงู (ุชุบุฑ ูุงุจุณุชฺฏ)
       |
       +-- ูพุงฺฉุณุงุฒ ุงุซุฑ ูุจู
       +-- ุงุฌุฑุง ุงุซุฑ ุฌุฏุฏ
       |
 Unmount ฺฉุงููพูููุช
       |
 ูพุงฺฉุณุงุฒ ุงุซุฑุงุช ุฌุงูุจ (ูพุงฺฉุณุงุฒ ููุง)
```

---

### ฑ.ถ `useLayoutEffect`

**ุจู ุตูุฑุช ููุฒูุงู** ูพุณ ุงุฒ ุชุบุฑุงุช DOM ุงูุง **ูุจู ุงุฒ** ููุงุด ูุฑูุฑฺฏุฑ ุงุฌุฑุง ูโุดูุฏ.

**ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู**

- ุงูุฏุงุฒูโฺฏุฑ layout (ูุซู ุงูุฏุงุฒู ุนูุตุฑ) **ูุจู ุงุฒ** ุงูฺฉู ฺฉุงุฑุจุฑ ููฺฉุฑ ุจุจูุฏ.

**ูุซุงู โ ุงูุฏุงุฒูโฺฏุฑ ุงุฑุชูุงุน**

```tsx
const boxRef = useRef<HTMLDivElement>(null);
const [height, setHeight] = useState(0);

useLayoutEffect(() => {
  if (boxRef.current) {
    setHeight(boxRef.current.getBoundingClientRect().height);
  }
}, []);
```

**ุชูุฑู โ ูุฏุฑ ฺุณุจุงู**

> ุงุฑุชูุงุน ฺฉ ูุฏุฑ ุฑุง ุงูุฏุงุฒูโฺฏุฑ ฺฉูุฏ ู ุขู ููุฏุงุฑ ุฑุง ุจู ุนููุงู padding ุจุงูุง ุจู ูุญุชูุง ุงุตู ุงุถุงูู ฺฉูุฏ ุชุง ูุฑฺฏุฒ ูพุดุช ูุฏุฑ ูพููุงู ูุดูุฏ.

---

### ฑ.ท `useInsertionEffect`

```ts
useInsertionEffect(effect, deps?);
```

**ูุฏู**

ุงุณุชุงูโูุง ุจุญุฑุงู ุฑุง **ูุจู ุงุฒ** layout ู ููุงุด ุชุฒุฑู ฺฉูุฏุ ุงุฒ FOUC (ููุด ูุญุชูุง ุจุฏูู ุงุณุชุงู) ุฌููฺฏุฑ ฺฉูุฏ.

**ูุซุงู โ CSS ูพูุง**

```tsx
useInsertionEffect(() => {
  const styleTag = document.createElement("style");
  styleTag.textContent = ".brand { color: tomato; }";
  document.head.append(styleTag);
  return () => styleTag.remove();
}, []);
```

**ุชูุฑู**

> ฺฉุงููพูููุช ุงุฌุงุฏ ฺฉูุฏ ฺฉู ฺฉ ุฑูฺฏ accent ุชุตุงุฏู ุฏุฑ mount ุงูุชุฎุงุจ ฺฉูุฏ ู ูุงุนุฏูโุง ูุซู `.accent { color: <color>; }` ุชุฒุฑู ฺฉูุฏ.

---

### ฑ.ธ `useCallback` & ฑ.น `useMemo`

- `useCallback(fn, deps)` ฺฉ **ุชุงุจุน memoized** ุจุฑูโฺฏุฑุฏุงูุฏ.
- `useMemo(factory, deps)` ฺฉ **ููุฏุงุฑ memoized** ุจุฑูโฺฏุฑุฏุงูุฏ.

**ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉูู**

- ุฌููฺฏุฑ ุงุฒ ูุญุงุณุจุงุช / ุจุงุฒุณุงุฒโูุง ฺฏุฑุงูโููุช ฺฉู ุจุงุนุซ re-render ูุฑุฒูุฏุงู ูโุดููุฏ.

**ูุซุงู โ handlers ูพุงุฏุงุฑ**

```tsx
const addTodo = useCallback((text: string) => {
  setTodos((t) => [...t, { id: crypto.randomUUID(), text }]);
}, []);
```

**ุจูุชุฑู ุดููโูุง**

- ูพุณ ุงุฒ ุชุฃุฏ ูุดฺฉูุงุช ุนููฺฉุฑุฏ ุจู ุณุฑุงุบ ุขูโูุง ุจุฑูุฏ.
- ุขุฑุงูโูุง ูุงุจุณุชฺฏ ุฑุง ุจุง ุจุงูุง ุจุฑุฏู ููุงุฏุฑ ูพุงุฏุงุฑ ฺฉูฺฺฉ ูฺฏู ุฏุงุฑุฏ.

**ุชูุฑู โ ููุงุดโุฏููุฏู ูุจููุงฺ**

> ุนุฏุฏ ูุจููุงฺ `n` ุฑุง ูุดุงู ุฏูุฏ ฺฉู `n` ุงุฒ ฺฉ ูุฑูุฏ ูโุขุฏ. ูุญุงุณุจู ุฑุง memoize ฺฉูุฏ ุชุง ููุท ููุช `n` ุชุบุฑ ูโฺฉูุฏ ุงุฌุฑุง ุดูุฏ.

---

### ฑ.ฑฐ `useImperativeHandle`

```ts
useImperativeHandle(ref, createHandle, deps?);
```

**ูุฏู**

ฺฉ ุฒุฑูุฌููุนู ฺฉูุชุฑู ุดุฏู ุงุฒ ูุชุฏูุง imperative ุฑุง ุจุฑุง ฺฉุงููพูููุชโูุง ูุงูุฏ ุขุดฺฉุงุฑ ฺฉูุฏ.

**ูุซุงู โ API ูุฑูุฏ ุณูุงุฑุด**

```tsx
const FancyInput = forwardRef<HTMLInputElement, Props>((props, ref) => {
  const innerRef = useRef<HTMLInputElement>(null);
  useImperativeHandle(ref, () => ({
    focus: () => innerRef.current?.focus(),
    clear: () => innerRef.current && (innerRef.current.value = ""),
  }));
  return <input ref={innerRef} {...props} />;
});
```

**ุชูุฑู**

> ฺฉุงููพูููุช `Stopwatch` ุจุง ูุชุฏูุง `start()`ุ `stop()`ุ `reset()` ุจุณุงุฒุฏ ฺฉู ุงุฒ ุทุฑู `useImperativeHandle` ุขุดฺฉุงุฑ ูโุดููุฏ.

---

### ฑ.ฑฑ `useDebugValue`

ุจุฑฺุณุจโูุง ูุงุจู ูุดุงูุฏู ุฏุฑ React DevTools ุงุถุงูู ฺฉูุฏ.

```ts
useDebugValue(value, formatFn?);
```

ูุซุงู:

```ts
useDebugValue(user, (u) => `ฺฉุงุฑุจุฑ: ${u.name}`);
```

---

## ฒ. ููฺฉโูุง ุงุถุงู

### ฒ.ฑ `useId`

ID ูุง ููุญุตุฑ ุจู ูุฑุฏ ุชููุฏ ฺฉูุฏ ฺฉู ุจู ุณุฑูุฑ ู ฺฉูุงูุช ูุทุงุจูุช ุฏุงุฑูุฏ.

```ts
const id = useId();
<label htmlFor={id}>ูุงู</label>
<input id={id} />
```

### ฒ.ฒ `useSyncExternalStore`

ุฏุฑ ฺฉ store ุฎุงุฑุฌ ุจุง ุณุงุฒฺฏุงุฑ ุฏุฑ ุทูู ุฑูุฏุฑ ููุฒูุงู ุงุดุชุฑุงฺฉ ฺฉูุฏ.

```tsx
const time = useSyncExternalStore(subscribe, getSnapshot);
```

### ฒ.ณ `useDeferredValue`

ฺฉ ููุฏุงุฑ ุบุฑุถุฑูุฑ ุฑุง ุชุง ุฒูุงู ฺฉู ูุฑูุฑฺฏุฑ ุจฺฉุงุฑ ุงุณุชุ ุจู ุชุนูู ุจูุฏุงุฒุฏ.

```tsx
const deferred = useDeferredValue(value);
```

**ุชูุฑู โ ููุชุฑ ูุณุช**

> ุฌุณุชุฌู ุฌุณุชุฌู ุฑุง ุจู ุชุนูู ุจูุฏุงุฒุฏ ุชุง UI ูุณุช ุจุฑุง ูุฑูุฏโูุง ุทููุงู ูพุงุณุฎฺฏู ุจูุงูุฏ.

### ฒ.ด `useTransition`

ฺฉ transition ฺฉูโุงูููุช ุดุฑูุน ฺฉูุฏ.

```ts
const [isPending, startTransition] = useTransition();
```

ูุซุงู โ ุฌุณุชุฌู type-ahead ฺฉู UI ุฑุง ููู ููโฺฉูุฏ.

---

## ณ. ุฌุฏุฏ ุฏุฑ React ฑน

React ฑน ุจุฑ **ูุฑูโูุง** ู **ุชุบุฑุงุช ุฏุงุฏู** ุชูุฑฺฉุฒ ุฏุงุฑุฏุ ุณู ููฺฉ ุฌุฏุฏ ุจู ุนูุงูู ุชุงุจุน ุฌุฏุฏ `use()` ุฑุง ูุนุฑู ูโฺฉูุฏ.

### ณ.ฑ `useOptimistic`

UI ุฑุง **ูุจู ุงุฒ** ุชุฃุฏ ุณุฑูุฑ ุจูโุทูุฑ ุฎูุดโุจูุงูู ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

```tsx
const [optimisticTodos, addOptimisticTodo] = useOptimistic<Todo[], Todo>(
  todos,
  (state, newTodo) => [...state, { ...newTodo, optimistic: true }]
);

async function handleAdd(text: string) {
  addOptimisticTodo({ id: "temp", text });
  await saveTodo(text);
}
```

**ุชูุฑู โ ูุฑูุฏ ฺุช**

> ูพุงูโูุง ุฑุง ููุฑุงู ุจุง ุจุฑฺุณุจ _ุฎูุดโุจูุงูู_ ูุดุงู ุฏูุฏุ ุณูพุณ ูพุณ ุงุฒ ุฐุฎุฑู ุฌุงฺฏุฒู ฺฉูุฏ.

### ณ.ฒ `useActionState`

ูุฑู `action` ูุง ุฑุง ูุฏุฑุช ฺฉูุฏ ู ุญุงูุช ฺฉุงููพูููุช ุฑุง ุจุง ูุชุฌู ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

```tsx
const [error, formAction, pending] = useActionState(async (prev, formData) => {
  try {
    await submit(formData);
    return null; // ุฎุทุง ูุณุช
  } catch (e) {
    return (e as Error).message;
  }
}, null);

<form action={formAction}>{/* ูุฑูุฏโูุง */}</form>;
```

**ุชูุฑู โ ุชุบุฑ ูุงู ูพุฑููุงู**

> ูุฑู ุชุบุฑ ูุงู ูพุฑููุงู ุจุณุงุฒุฏ ฺฉู ุฎุทุงูุง ุณูุช ุณุฑูุฑ ุฑุง ุงุฒ ุทุฑู `error` ฺฏุฒุงุฑุด ุฏูุฏ.

### ณ.ณ `useFormStatus`

ูุถุนุช ูุฒุฏฺฉโุชุฑู `<form>` ูุงูุฏ ุฑุง ุจุฎูุงูุฏ.

```tsx
const { pending } = useFormStatus();
<button disabled={pending}>ุฐุฎุฑู</button>;
```

**ุชูุฑู โ ุบุฑูุนุงู ุฏุฑ submit**

> ุฏุฑ ูุฑู ุชุบุฑ ูุงู ุจุงูุงุ ุฏฺฉูู submit ุฑุง ุฏุฑ ุญุงู ฺฉู `pending` true ุงุณุช ุบุฑูุนุงู ฺฉูุฏ.

### ณ.ด `use()`

ุงฺฏุฑฺู ุงุฒ ูุธุฑ ูู ฺฉ ููฺฉ ูุณุชุ `use()` ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ _await_ promise ูุง ุฑุง ุฏุฑูู ฺฉ ฺฉุงููพูููุช ุฏุฑ ุทูู ุฑูุฏุฑ ุงูุฌุงู ุฏูุฏ.

```tsx
function User({ id }: { id: string }) {
  const user = use(fetch(`/api/users/${id}`).then((r) => r.json()));
  return <span>{user.name}</span>;
}
```

**ูุดุฏุงุฑูุง**

- ููุท ุฏุฑ **Server Components** ุง ุจุง ฺฉุงููพุงูุฑ React ูพุดุชุจุงู ูโุดูุฏ.
- ฺฉ promise ุฒุฑ ููุฏ ูพุฑุชุงุจ ูโฺฉูุฏ โ ุจู ูุฑุฒูุง Suspense ุชฺฉู ฺฉูุฏ.

---

## ด. ูุงฺูโูุงูู ู ููุงุจุน ุจุดุชุฑ

- [ูพุณุช ุงูุชุดุงุฑ React ฑน](https://react.dev/blog/2024/12/05/react-19)
- [ูุฑุฌุน ุฑุณู API ููฺฉโูุง](https://react.dev/reference/react)
- [Kent C. Dodds โ Epic React](https://epicreact.dev/) โ ุบูุฑ ุนูู ู ุชูุฑูุงุช
- [React Docs โ ูุฑูโูุง ู Actions](https://react.dev/learn/forms)
